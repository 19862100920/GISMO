<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
					"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Download instructions and README for the waveform suite for MATLAB" />
    <meta name="keywords" content="download, README, waveform suite, scnlobject, datasource" />
	<meta name="robots" content="index,nofollow"/>
    <title>Working with Waveforms:Download the waveform suite</title>
    <link type="text/css" rel="stylesheet" href="wavesuite.css" />
  </head>
  
  <body>
  <div id="allcontent">
  <div id="header">
    <p><img id = "photo" src="images/lilwave.gif" alt="waveform icon" /></p>
    <h1><em>Download</em> the Waveform Suite  </h1>
  <p>The latest version of the waveform suite is r258</p>
  </div>
  
  <div id="main">
  <p>The waveform suite is a collection
        of MATLAB classes that work together to speed up and simplify the 
        import and manipulation of time-series data.  Originally conceived
        to manipulate seismic data, it may be applied to any regularly 
        sampled time-series data that is associated with a location.</p>
      <h2 class="downloadme">DOWNLOAD LATEST WAVEFORM SUITE 
      <a href="downloadstart.html">HERE (.zip)</a><br/>
        <i>Version: r258<br/>
        Date: 1/03/2011</i>
    </h2>
    <p>This update includes performance improvements and a variety of bug fixes. A new version of the waveform structure has been created, as well, but this should be invisible to existing programs.</p>
	<hr/>
	<a name="readme"/>
	<h2>README Notes</h2>
	<h3>ZIP file contents:</h3>
	<ul>
	<li><b>@datasource/</b> source directory for the datasource class</li>
	<li><b>@filterobject/</b> source directory for the filterobject class</li>
	<li><b>@scnlobject/</b> source directory for the scnlobject class</li>
	<li><b>@spectralobject/</b> source directory for the spectralobject class</li>
	<li><b>@waveform/</b> source directory for the waveform class</li>
	<li><b>uispecgram.fig</b> UI component of the spectrogram generation program</li>
	<li><b>uispecgram.m</b> example of an interactive spectrogram generation program</li>
	</ul>
	<h3>Installation</h3>
	<p>Unzip the files either into the MATLAB directory from which you work, or into another directory.
	The parent directory (the one that contains all the <code>@whatever</code> directories) must be on the MATLAB path.</p>
	
	<p>To enable log spectral plotting, please download  <code>uimagesc</code>, by Frederic Moisy, available at: http://www.mathworks.com/matlabcentral/fileexchange/11368
Then, extract it to a location along the MATLAB path.</p>
	<p>Additional help, along with examples can be found online at</p>
	<ul>
	<li><a href="waveform_suite_example_index.html">http://kiska.giseis.alaska.edu/Input/celso/matlabweb/waveform_suite/waveform_suite_example_index.html</a> : several examples of the waveform suite in use</li>
	<li><a href="waveform.html">http://kiska.giseis.alaska.edu/Input/celso/matlabweb/waveform_suite/waveform.html</a> : the main waveform information page.  Check the links on the left for information about the other features of waveform.</li>
	<li><a href="download.html">http://kiska.giseis.alaska.edu/Input/celso/matlabweb/waveform_suite/download.html</a> : (this&nbsp;page)
	</li>
	</ul>
	<h3>Notes about this release</h3>	
	<p><i>r258</i> </p>
	<p>This release includes fixes to dates, history, extract, and an error generated when creating a specgram from a single waveform</p><p>Notice the large release number change?  Much of that stems from waveform sharing revision codes with the <a href="http://www.giseis.alaska.edu/Seis/EQ/tools/GISMO/">GISMO</a> suite, which includes additional files not found here.</p>
	<p><i>r234</i> </p>
	<p>This release consists of a series of small fixes, plus one pretty cool addition. </p>
<p> First the addition:<br/>
	Waveform now has a legend routine.  If you plot multiple wavforms w, then legend(w) will automatically create a legend based upon the uniqueness of STATION and CHANNEL.  For example, if all waveforms have different stations, but are the same channel, it will create a legend from the STATION.  If stations and channels are all the same, it will label with the start time.  You may specify fields with the syntax legend(w, 'myfield' [,...]), where myfield is any information you might retrieve via waveform/get.</p>
	<table>
	<tr><td><u>example:</u></td></tr>
	<tr><td>
	<i>&nbsp;old way: </i> </td>
	<td><code>legend(strcat(get(w,'station'),':',get(w,'channel')]); </td><td><i>% everything specified in gross detail</i></code></td></tr>
	<tr><td><i>new way:</i> </td>
	<td><code>legend(w); </td><td><i>% if station & channel are non-unique</i></code></td></tr>
	<tr><td><i> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;or: </i></td>
	<td><code>legend(w,'station','channel'); </td><td><i>% also specified, but more readable</i></code></td></tr>
	
	</table>
	<p>The new old way will still work, and is how you might want to handle the more complex legend issues</p>
	
	<p> Also:</p>
<ul><li> fixed error where string dates (in non-vector cells) are not understood by datenum within the main <code>waveform</code> function.</li><li>added a method to <code>waveform/resample</code> called <code>'builtin'</code> that, oddly enough, invokes MATLAB's resample method.</li><li>
Fixed <code>datasource/getfilename</code> issue.</li><li>
Fixed a problem with <code>waveform/private/load_seisan</code> (cell vs string)</li></ul>
	<p><i>r228</i> </p>
	<p>This release fixed a small problem with the waveform statistics.  waveform/mean, waveform/median, waveform/std, and waveform/var had been written to use nanmean, nanmedian, etc.  However, when I did this, I didn't realize that they were within the statistics toolbox.  I have since modified them to work without the toolbox.</p>
	<p>The spectrogram plotting functions have been expanded and updated.  Now, both specgram and specgram2 will work for multiple waveforms.  New options allow the user to control font-size, and excercise greater control over the colorbar.  The uispecgram program has been updated to include the ability to generate log spectra, though the log-plotting ability still needs to be fine tuned.</p>
	<p><i>r211</i> </p>
	<p> This is a maintenance release that fixes a problem with loading waveforms and acknowledges that the underlying waveform structure has changed.</p>
	<ul><li>Fixed a bug in r207 (introduced ~r190) where attempting to read in a recently saved waveform (structure v1.1) will cause an error.  This was caused by the removal of the station and channel fields (which had been depricated since the introduction of scnlobjects).  The new waveform structure is referred to internally as v1.2.</li><li>
Moved HISTORY out of miscelleneous fields and into its own proper field within the waveform structure.  This should save some speed overhead.</li><li>
Fixed <code>sign(waveform)</code>, which was transposing the data column.</li></ul>
	<p><i>r206</i> </p>
	<p>Notice that the version # has changed to a release number.  This has been prompted by changes with how the source code is version-controlled, and is a little less arbitrary than the 1.xx versions created before.</p>
	<p><u>Improved:</u></p>
	<ul><li><b>speed &amp; memory efficiency</b>: the workings of several functions have been streamlined to reduce the amount of data juggling that occurs behind the scenes.</li>
	<li><b>error handling</b>: Several error messages have been improved, providing better explanations and/or suggestions on how to prevent the errors.  Additional tests have been added to some functions further validating the data in order to prevent surprise (or less intelligible) errors.</li>
	<li><b>NaN support</b>: <i>r191</i> Basic statistical functions (std, var, median, etc.) were rewritten to take advantage of MATLAB's existing NaN support (eg, nanstd, nanvar, nanmedian).  Where NaN values cannot be handled eloquently, the error messages and warnings have been improved to provide better information about what is occurring</li>
	<li><b>history</b>: <i>r200</i> Displaying a waveform now shows the number of items in the history, along with the latest modification date.  Previously, it merely showed as an <code> Nx2 cell</code></li>
	<li><b>help text</b>: the help text has been improved for several functions</li></ul>
	
	<p><u>Added:</u></p>
	<ul>
	<li><b>cumtrapz integration</b>: added ability to specify integration method for waveform/integrate.  Previously, only cumsum integration was allowed, but now 'trapz' can be specified, which will use matlab's <code>cumtrapz</code> function.</li>
	<li><b>log specgram plots:</b> <i>r192</i> added the ability to stretch the y-axis logarithmically  for spectrograms.  This has been added to spectralobject/specgram and spectralobject/specgram2, and depends upon the function <code>uimagesc</code>, created by Frederic Moisy, and available at the matlabcentral file exchange: <a href="http://www.mathworks.com/matlabcentral/fileexchange/11368">File 11368</a><br/>usage: <code>specgram.m(spectralobject,waveform,'yscale','log')</code><br/><i>Special Thanks to Jason Amundson for this one!</i></li>
	</ul>
	
	<p><u>Upgraded:</u></p>
	<ul><li><b>Mathematical operators</b>: <i>r189</i> When an NxM waveform is added, subtracted, multiplied, or divided (<code> ./ </code>,<code> .* </code>,<code> - </code>,<code> + </code>) by an NxM numeric. <br/>
	Where N is numeric and W is a waveform of the same size (both may be N-dimensional), then W .* N will multiply them element-wise. likewise, W + N will add them element-wise.  <br/> <i>ie.</i>, for addition, if W is a 1x2 waveform, and N is a 1x2 double, then<br/>
	<code>W .* N = [W(1).* N(1) W(2) .*N(2)]</code><br/> The same will hold true for the other basic operators </li></ul>
	
	<p><u>Removed:</u></p>
	<ul>
	<li><b>user manual</b> has been removed from the suite.  It had grown outdated, and by now is more misleading than useful.  For details about how to use the functions, consult the inline help.  Additional resources are the waveform suite website and the GISMO user group.</li>
	<li><b>global variables</b>: <i>r200</i> the number of global variables used withinn waveform has been reduced. In doing so, functions waveform/private/mep2dep and waveform/private/dep2mep have been reinstated. (These functions have yoyo'd between .m files and global inline functions ever since the inception of waveform.)  Other than freeing up global namespace, this should be invisible to the user.</li>
	<li><code>waveform/lookupunits.m</code> has been removed from the waveform suite.  Its use is antelope specific, and really doesn't belong with the distribution.  Instead its name has been changed and is now located in the GISMO suite download <code>contributed_antelope/add_waveform_fields/db_lookupunits.m</code>  <i>r205</i></li>
	<li><code>spectralobject/spwelch.m</code> has been deprecated.  Its functionality merely duplicated pwelch, and (perhaps) should not ever have been included in releases of the waveform suite.</li>
	</ul>
	
<p><i>Previous Versions</i></p>
<p>v 1.12</p>
	<p>includes major changes to how waveform handles SAC files.  Several bugs regarding the loading and saving of SAC files were brought to my attention.  In response, all the sac-related files within the @waveform/private directory have been modified.  These modification should be mostly transparent to overlying programs with the exception of User Fields.</p>
	<p>When waveform opens a sac file, it read the header into user-defined fields.  Much information from these fields were incorporated into the waveform, such as period, start time, units, etc.  The user fields were then left in the waveform, but were vestigial.  When a waveform writes out to a sac file, it recalculates much of this information because all of it was subject to change by the user.   Now, most of these "vestigial" fields have been removed from the waveform.  Fields that are no longer in the user-defined field section include: B, E, DEPMIN, DEPMAX, DEMEN, NPTS, KSTNM, KCMPNM, KNETWK, DELTA, NVHDR, IDEP, and LEVEN.  All of the values contained in these fields are accessible through pre-existing means.</p>
	<p>Starting with the file marked as v 1.10, i have implemented a fundamental change in the way <i>waveform</i> works.  The source of the data, which used to be deeply entwined with the waveform class has been pulled out and split into its own class, <i>datasource</i>.  This means that the waveform constructor call no longer requires a different series of arguments depending on the source.  Now, the overlying program does not need to know whether data is imported via SAC, winston, antelope, etc.  Additionally, this change has allowed the easy importation of user-defined file types and the ability to intelligently navigate directory structures.  It is still backwards compatible, but warnings will be generated that aid the user in updating code to the new paradigm.</p>
	<p>Support for the importation of SEISAN files was added, too. However, the inherent directory structure used with SEISAN precludes the datasource's ability to navigate and find the appropriate files.  They can still be imported, but the file names will have to be individually declared.</p>
	<p>scnlobjects were introduced as a way to make waveform more seed compliant, and to provide a robust way of handling the locales associated with each waveform.  Other than the initial creation of scnlobjects necessary for the creation or importation of waveforms, this change is relatively transparent.  That is to say, you can still access stations and channels through waveform's set/get routines without having to deal with the scnlobject contained within each waveform.</p>
	<h3>Acknowledgements</h3>
	<p>In one form or another, the waveform suite has been around for roughly 5 years.  I'd like to thank those that have helped me improve it throughout that time.  I especially  would like to recognize <a href="http://myweb.facstaff.wwu.edu/caplanj/">Jackie-Caplan Auerbach</a> (for introducing me to MATLAB and inspiring this suite in the first place), <a href="http://www.gi.alaska.edu/~amundson/">Jason Amundson</a> (a great debugger and source of addtional functionality), <a href="http://web.utah.edu/thorne/">Micheal Thorne</a> (who's SAC routines I thoroughly cannibalized), <a href="http://kiska.giseis.alaska.edu/Input/glenn/">Glenn Thompson</a> and <a href="http://www.giseis.alaska.edu/Input/silvio/index.html">Silvio DeAngelis</a> (as testers and for SEISAN help), my advisor <a href="http://www.giseis.alaska.edu/Input/steve/">Steve McNutt</a> (who let me get away with working on this stuff when, perhaps I should have been concentrating on the wiggles themselves), and <a href="http://www.aeic.alaska.edu/input/west/">Michael West</a> (For plenty of discreet encouragement and great conversations on waveform philosophy... and author of the correlation toolbox, which is based upon the waveform object).</p>
<p>I'm sure I'm leaving out important people; and I reserve the right to add them as they pop to mind.</p>
	
  </div>
  <div id="navigation">
  <p><span class="suite_title">Waveform Suite</span><br/> for MATLAB</p>
    <p class="here"><b>download</b></p><hr/>
	<p>
	<a href="waveform.html">waveform</a><br/>
	<a href="scnlobject.html">scnlobject</a><br/>
	<a href="datasource.html">datasource</a><br/>
	<a href="filterobject.html">filterobject </a><br/>
	<a href="spectralobject.html">spectralobject</a></p>
	<hr/>
	<p><a href="../feline_example/tutorial_and_code_frameset.htm">object tutorial</a></p>
	
	<hr/><p> <a href="waveform_suite_example_index.html">Waveform Suite Examples</a>
  </p><hr/>
  <p><a href="../../index.html">Celso's homepage</a></p>
   <!-- CSS & XHTML validation approval -->
<p>
    <a href="http://validator.w3.org/check?uri=referer"><img
        src="http://www.w3.org/Icons/valid-xhtml10-blue"
        alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
  </p>
  <p>
<a href="http://jigsaw.w3.org/css-validator/check/referer">
    <img style="border:0;width:88px;height:31px"
        src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
        alt="Valid CSS!" />
</a>
</p>
  </div> <!-- navigation -->
  </div> <!-- all content -->
  <script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-8415966-1");
pageTracker._trackPageview();
} catch(err) {}</script>
  </body>
</html>