<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plot_stats</title>
  <meta name="keywords" content="plot_stats">
  <meta name="description" content="PLOT_STATS plot statistics from master correlation algorithm">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">GISMO</a> &gt; <a href="#">contributed</a> &gt; <a href="../index.html">master_correlation</a> &gt; <a href="index.html">+mastercorr</a> &gt; plot_stats.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/contributed/master_correlation/+mastercorr&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>plot_stats
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>PLOT_STATS plot statistics from master correlation algorithm</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function plot_stats(W) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PLOT_STATS plot statistics from master correlation algorithm
 W = PLOT_STATS(W) plots summary statistics following an
 application of MASTERCORR.SCAN. This summary is useful for assessing the
 quality and the nature of the detected events. The input waveform W may
 be any dimension. However it must contain the fields produced by
 MASTERCORR.SCAN including: MASTERCORR_TRIG, MASTERCORR_CORR,
 MASTERCORR_ADJACENT_CORR 

 *** NOTE ABOUT MULTIPLE WAVEFORMS ***
 This function is designed to accept NxM waveform matrices as input. In
 this case the plot will contain relevent data from all element waveforms
 of W. This is useful, for example, when W is a 24x1
 matrix of hourly waveforms. However, unexpected (or clever!) results may
 be produced when W is complicated by elements with different channels or
 master waveform snippets. For some uses it may prove wise to pass only
 selected elements of W to this function. For example:
 C = MASTERCORR.EXTRACT(W(1:5)) 
 
 See also mastercorr.<a href="scan.html" class="code" title="function [WW,WWxc] = scan(WW,WWsnippet,threshold)">scan</a>, mastercorr.<a href="extract.html" class="code" title="function varargout = extract(W,varargin)">extract</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../GISMO/core/@Catalog/disp.html" class="code" title="function disp(obj, showall)">disp</a>	CATALOG.DISP Display Catalog object</li><li><a href="../../../../GISMO/core/@Catalog/hist.html" class="code" title="function hist(catalogObject);">hist</a>	HIST plot histograms of magnitude distribution, depth</li><li><a href="../../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>	CATALOG.PLOT Plot hypocenters in map view and cross-sections</li><li><a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../../GISMO/core/@correlation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>	SET Set properties for correlation object</li><li><a href="../../../../GISMO/core/@correlation/sort.html" class="code" title="function c = norm(c,varargin)">sort</a>	C = SORT(C,'TIME')</li><li><a href="../../../../GISMO/core/@datasource/disp.html" class="code" title="function disp(ds)">disp</a>	DISP Datasource disp overloaded operator</li><li><a href="../../../../GISMO/core/@datasource/get.html" class="code" title="function val = get(ds, propertyname)">get</a>	</li><li><a href="../../../../GISMO/core/@drumplot/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get drumplot properties</li><li><a href="../../../../GISMO/core/@drumplot/plot.html" class="code" title="function varargout = plot(h)">plot</a>	PLOT: Drumplot plotting function. A drumplot object (h) contains no</li><li><a href="../../../../GISMO/core/@drumplot/set.html" class="code" title="function h = set(h,varargin)">set</a>	SET: Set drumplot properties</li><li><a href="../../../../GISMO/core/@filterobject/disp.html" class="code" title="function disp(f)">disp</a>	DISP - Filterobject disp overloaded operator</li><li><a href="../../../../GISMO/core/@filterobject/get.html" class="code" title="function val = get(f, prop_name)">get</a>	GET - Get filterobject properties</li><li><a href="../../../../GISMO/core/@filterobject/set.html" class="code" title="function f = set(f, varargin)">set</a>	SET - Set filterobject properties</li><li><a href="../../../../GISMO/core/@rsam/plot.html" class="code" title="function handlePlot = plot(rsam_vector, varargin)">plot</a>	RSAM/PLOT plot rsam data</li><li><a href="../../../../GISMO/core/@scnlobject/disp.html" class="code" title="function disp(sncl)">disp</a>	DISP - scnl disp overloaded operator</li><li><a href="../../../../GISMO/core/@scnlobject/get.html" class="code" title="function stuff = get(scnl, prop_name)">get</a>	GET for the scnl object</li><li><a href="../../../../GISMO/core/@scnlobject/set.html" class="code" title="function scnl = set(scnl, varargin)">set</a>	SET - Set properties for scnlobject</li><li><a href="../../../../GISMO/core/@spectralobject/disp.html" class="code" title="function disp(s)">disp</a>	DISP - spectralobject disp overloaded operator</li><li><a href="../../../../GISMO/core/@spectralobject/get.html" class="code" title="function out = get(s, prop_name)">get</a>	GET - Get properties for spectralobject</li><li><a href="../../../../GISMO/core/@spectralobject/set.html" class="code" title="function s = set(s, varargin)">set</a>	SET - Set properties for spectralobject</li><li><a href="../../../../GISMO/core/@threecomp/disp.html" class="code" title="function disp(TC)">disp</a>	DISP Display threecomp object</li><li><a href="../../../../GISMO/core/@threecomp/get.html" class="code" title="function val = get(TC,varargin)">get</a>	GET    Get threecomp object properties.</li><li><a href="../../../../GISMO/core/@threecomp/plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>	PLOT plots a threecomp object</li><li><a href="../../../../GISMO/core/@threecomp/set.html" class="code" title="function TC = set(TC, fieldName, val)">set</a>	SET inserts properties for threecomp object</li><li><a href="../../../../GISMO/core/@waveform/disp.html" class="code" title="function disp(w)">disp</a>	DISP Waveform disp overloaded operator</li><li><a href="../../../../GISMO/core/@waveform/get.html" class="code" title="function val = get(w,prop_name)">get</a>	GET Get waveform properties</li><li><a href="../../../../GISMO/core/@waveform/legend.html" class="code" title="function varargout = legend(wave, varargin)">legend</a>	legend creates a legend for a waveform graph</li><li><a href="../../../../GISMO/core/@waveform/max.html" class="code" title="function [Y, I] = max(w)">max</a>	MIN    Largest value of a waveform.</li><li><a href="../../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>	MIN    Smallest value of a waveform.</li><li><a href="../../../../GISMO/core/@waveform/plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>	PLOT plots a waveform object</li><li><a href="../../../../GISMO/core/@waveform/set.html" class="code" title="function w = set(w, varargin)">set</a>	SET Set properties for waveform object(s)</li><li><a href="../../../../GISMO/core/dev/@NewCorrelation/disp.html" class="code" title="function disp(c)">disp</a>	CORRELATION/DISPLAY Command window display of a correlation object</li><li><a href="../../../../GISMO/core/dev/@NewCorrelation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../../GISMO/core/dev/@NewCorrelation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../../GISMO/core/dev/@NewCorrelation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>	SET Set properties for correlation object</li><li><a href="../../../../GISMO/core/dev/@NewCorrelation/sort.html" class="code" title="function c = sort(c)">sort</a>	C = SORT(C) Sorts traces from oldest to youngest.</li><li><a href="../../../../GISMO/core/dev/@SeismicTrace/disp.html" class="code" title="function disp(T)">disp</a>	disp   Display information about SeismicTrace(s)</li><li><a href="../../../../GISMO/core/dev/@SeismicTrace/legend.html" class="code" title="function varargout = legend(T, varargin)">legend</a>	legend   Create a legend for the graph of a trace.</li><li><a href="../../../../GISMO/core/dev/@SeismicTrace/plot.html" class="code" title="function varargout = plot(T, varargin)">plot</a>	plot   plots a SeismicTrace</li><li><a href="../../../../GISMO/deprecated/@helicorder/disp.html" class="code" title="function disp(h)">disp</a>	DISP: Helicorder disp overloaded operator</li><li><a href="../../../../GISMO/deprecated/@helicorder/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get helicorder properties</li><li><a href="../../../../GISMO/deprecated/@helicorder/set.html" class="code" title="function h = set(h,varargin)">set</a>	SET: Set helicorder properties</li><li><a href="../../../../GISMO/deprecated/fft_tools/+wf_fft/plot.html" class="code" title="function plot(w)">plot</a>	PLOT plot fourier transform of a waveform</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function plot_stats(W)</a>
0002 
0003 <span class="comment">%PLOT_STATS plot statistics from master correlation algorithm</span>
0004 <span class="comment">% W = PLOT_STATS(W) plots summary statistics following an</span>
0005 <span class="comment">% application of MASTERCORR.SCAN. This summary is useful for assessing the</span>
0006 <span class="comment">% quality and the nature of the detected events. The input waveform W may</span>
0007 <span class="comment">% be any dimension. However it must contain the fields produced by</span>
0008 <span class="comment">% MASTERCORR.SCAN including: MASTERCORR_TRIG, MASTERCORR_CORR,</span>
0009 <span class="comment">% MASTERCORR_ADJACENT_CORR</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% *** NOTE ABOUT MULTIPLE WAVEFORMS ***</span>
0012 <span class="comment">% This function is designed to accept NxM waveform matrices as input. In</span>
0013 <span class="comment">% this case the plot will contain relevent data from all element waveforms</span>
0014 <span class="comment">% of W. This is useful, for example, when W is a 24x1</span>
0015 <span class="comment">% matrix of hourly waveforms. However, unexpected (or clever!) results may</span>
0016 <span class="comment">% be produced when W is complicated by elements with different channels or</span>
0017 <span class="comment">% master waveform snippets. For some uses it may prove wise to pass only</span>
0018 <span class="comment">% selected elements of W to this function. For example:</span>
0019 <span class="comment">% C = MASTERCORR.EXTRACT(W(1:5))</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% See also mastercorr.scan, mastercorr.extract</span>
0022 
0023 <span class="comment">% Author: Michael West, Geophysical Institute, Univ. of Alaska Fairbanks</span>
0024 <span class="comment">% $Date$</span>
0025 <span class="comment">% $Revision$</span>
0026 
0027 
0028 
0029 
0030 <span class="comment">% CHECK INPUTS</span>
0031 <span class="keyword">if</span> nargin ~= 1
0032     error(<span class="string">'Incorrect number of inputs'</span>);
0033 <span class="keyword">end</span>
0034 <span class="keyword">if</span> ~isa(W,<span class="string">'waveform'</span>) 
0035     error(<span class="string">'First argument must be waveform objects'</span>);
0036 <span class="keyword">end</span>
0037 
0038 
0039 <span class="comment">% READ MASTERCORR FIELDS</span>
0040 trig = [];
0041 corr = [];
0042 corrAdj = [];
0043 <span class="keyword">if</span> numel(W)&gt;1
0044     <span class="keyword">for</span> n=1:numel(W)
0045         trig = [trig ; <a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>(W(n),<span class="string">'MASTERCORR_TRIG'</span>)];
0046         corr = [corr ; <a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>(W(n),<span class="string">'MASTERCORR_CORR'</span>)];
0047         corrAdj = [corrAdj ; <a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>(W(n),<span class="string">'MASTERCORR_ADJACENT_CORR'</span>)];
0048         
0049     <span class="keyword">end</span>
0050 <span class="keyword">else</span>
0051     trig = <a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>(W,<span class="string">'MASTERCORR_TRIG'</span>);
0052     corr = <a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>(W,<span class="string">'MASTERCORR_CORR'</span>);
0053     corrAdj = <a href="../../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>(W,<span class="string">'MASTERCORR_ADJACENT_CORR'</span>);
0054 <span class="keyword">end</span>
0055 
0056 
0057 <span class="keyword">if</span> numel(trig)==0
0058    <a href="../../../../GISMO/core/@Catalog/disp.html" class="code" title="function disp(obj, showall)">disp</a>(<span class="string">'No MASTERCORR_TRIG field in this data'</span>);
0059    <span class="keyword">return</span>;
0060 <span class="keyword">end</span>
0061 
0062 
0063 
0064 <span class="comment">% SORT BY TIME</span>
0065 [tmp,index] = <a href="../../../../GISMO/core/@correlation/sort.html" class="code" title="function c = norm(c,varargin)">sort</a>(trig);
0066 trig = trig(index);
0067 corr = corr(index);
0068 corrAdj = corrAdj(index);
0069 
0070 
0071 
0072 
0073 <span class="comment">% MAKE PLOT</span>
0074 figure(<span class="string">'Color'</span>,<span class="string">'w'</span>,<span class="string">'Position'</span>,[50 50 850 1100]);
0075 box on; hold on;
0076 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gcf,<span class="string">'DefaultLineLineWidth'</span>,1);
0077 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gcf,<span class="string">'DefaultAxesFontSize'</span>,12);
0078 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gcf,<span class="string">'DefaultLineMarkerSize'</span>,5);
0079 
0080 
0081 <span class="comment">% TIME HISTORY</span>
0082 subplot(3,1,1);
0083 <a href="../../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>([trig' ; trig'],[corr' ; corrAdj'],<span class="string">'-'</span>,<span class="string">'Color'</span>,[0.7 0.7 0.7])
0084 hold on;
0085 <a href="../../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>(trig,corr,<span class="string">'ok'</span>,<span class="string">'MarkerFaceColor'</span>,<span class="string">'y'</span>)
0086 xlim([<a href="../../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>(trig) <a href="../../../../GISMO/core/@waveform/max.html" class="code" title="function [Y, I] = max(w)">max</a>(trig)]);
0087 ylim([0.5 1.0]);
0088 datetick(<span class="string">'x'</span>,<span class="string">'KeepLimits'</span>);
0089 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gca,<span class="string">'YGrid'</span>,<span class="string">'on'</span>)
0090 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gca,<span class="string">'YTick'</span>,[0:.1:1]);
0091 ylabel(<span class="string">'Correlation coefficient'</span>)
0092 <a href="../../../../GISMO/core/@waveform/legend.html" class="code" title="function varargout = legend(wave, varargin)">legend</a>(<span class="string">'adjacent peak'</span>,<span class="string">'location'</span>,<span class="string">'SouthWest'</span>);
0093 
0094 subplot(3,1,2);
0095 <a href="../../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>(trig(2:end),86400*(trig(2:end)-trig(1:end-1)),<span class="string">'ko'</span>,<span class="string">'MarkerFaceColor'</span>,<span class="string">'y'</span>)
0096 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gca,<span class="string">'YScale'</span>,<span class="string">'log'</span>);
0097 xlim([<a href="../../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>(trig) <a href="../../../../GISMO/core/@waveform/max.html" class="code" title="function [Y, I] = max(w)">max</a>(trig)]);
0098 datetick(<span class="string">'x'</span>,<span class="string">'KeepLimits'</span>);
0099 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gca,<span class="string">'YGrid'</span>,<span class="string">'on'</span>)
0100 <span class="comment">%set(gca,'YTick',10.^[1:10]);</span>
0101 ylabel(<span class="string">'Time (s)'</span>)
0102 <a href="../../../../GISMO/core/@waveform/legend.html" class="code" title="function varargout = legend(wave, varargin)">legend</a>(<span class="string">'Event spacing'</span>,<span class="string">'location'</span>,<span class="string">'SouthWest'</span>);
0103 
0104 subplot(3,1,3)
0105 <a href="../../../../GISMO/core/@Catalog/hist.html" class="code" title="function hist(catalogObject);">hist</a>(corr,[0.5:0.01:1]);
0106 xlim([0.5 1]);
0107 h = findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);
0108 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(h,<span class="string">'FaceColor'</span>,<span class="string">'y'</span>,<span class="string">'EdgeColor'</span>,<span class="string">'k'</span>)
0109 <a href="../../../../GISMO/core/@waveform/legend.html" class="code" title="function varargout = legend(wave, varargin)">legend</a>(<span class="string">'Correlation'</span>,<span class="string">'location'</span>,<span class="string">'SouthWest'</span>);
0110 
0111 
0112 <span class="comment">% PLOT INTEREVENT TIME AGAINST CORRELATION VALUE</span>
0113 <span class="comment">%figure</span>
0114 <span class="comment">%tDiff = 86400*(trig(2:end)-trig(1:end-1));</span>
0115 <span class="comment">%plot([tDiff' ; tDiff'],[corr(2:end)' ; corr(1:end-1)'],'k-')</span>
0116 <span class="comment">%hold on;</span>
0117 <span class="comment">%plot(tDiff,max([corr(2:end)' ; corr(1:end-1)']),'ko');</span>
0118 <span class="comment">%set(gca,'XScale','log');</span>
0119 
0120 
0121 
0122 
0123 <span class="comment">%PRINT OUT FIGURE</span>
0124 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gcf, <span class="string">'paperorientation'</span>, <span class="string">'portrait'</span>);
0125 <a href="../../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>(gcf, <span class="string">'paperposition'</span>, [.25 .25 8 10.5] );
0126</pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>