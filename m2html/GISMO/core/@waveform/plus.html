<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plus</title>
  <meta name="keywords" content="plus">
  <meta name="description" content="PLUS (+) waveform addition     w + q">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">GISMO</a> &gt; <a href="#">core</a> &gt; <a href="index.html">@waveform</a> &gt; plus.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/core/@waveform&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>plus
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>PLUS (+) waveform addition     w + q</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function w = plus(w,q) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PLUS (+) waveform addition     w + q
     w is an N-DIMENSIONAL waveform.
     if q is a scalar, it is added to all data values of all waveforms

     if q is numeric, and has the same size &amp; shape as w, then each q is
     added to the appropriate w  ie.  result(n) = w(n) + q(n)

     if q is a vector, it should be of the same length as the number of
     samples within the waveform.  It will be added sample-by-sample added
     to each waveform.

     if q is waveform, data values from w &amp; q are added together, assuming
     that each has the same number of samples.

 See also: <a href="plus.html" class="code" title="function w = plus(w,q)">plus</a>, wavform/plus, <a href="fix_data_length.html" class="code" title="function w = fix_data_length(w, maxlen)">fix_data_length</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/@datasource/get.html" class="code" title="function val = get(ds, propertyname)">get</a>	</li><li><a href="../../../GISMO/core/@drumplot/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get drumplot properties</li><li><a href="../../../GISMO/core/@filterobject/get.html" class="code" title="function val = get(f, prop_name)">get</a>	GET - Get filterobject properties</li><li><a href="../../../GISMO/core/@scnlobject/get.html" class="code" title="function stuff = get(scnl, prop_name)">get</a>	GET for the scnl object</li><li><a href="../../../GISMO/core/@spectralobject/get.html" class="code" title="function out = get(s, prop_name)">get</a>	GET - Get properties for spectralobject</li><li><a href="../../../GISMO/core/@threecomp/get.html" class="code" title="function val = get(TC,varargin)">get</a>	GET    Get threecomp object properties.</li><li><a href="double.html" class="code" title="function n = double(W, option)">double</a>	DOUBLE returns a waveform's data as a double type</li><li><a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>	GET Get waveform properties</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/deprecated/@helicorder/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get helicorder properties</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/core/dev/@NewCorrelation/wiggleplot.html" class="code" title="function wiggleplot(c,scale,ord,norm)">wiggleplot</a>	Private method. See ../plot for details.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function w = plus(w,q)</a>
0002    <span class="comment">%PLUS (+) waveform addition     w + q</span>
0003    <span class="comment">%     w is an N-DIMENSIONAL waveform.</span>
0004    <span class="comment">%     if q is a scalar, it is added to all data values of all waveforms</span>
0005    <span class="comment">%</span>
0006    <span class="comment">%     if q is numeric, and has the same size &amp; shape as w, then each q is</span>
0007    <span class="comment">%     added to the appropriate w  ie.  result(n) = w(n) + q(n)</span>
0008    <span class="comment">%</span>
0009    <span class="comment">%     if q is a vector, it should be of the same length as the number of</span>
0010    <span class="comment">%     samples within the waveform.  It will be added sample-by-sample added</span>
0011    <span class="comment">%     to each waveform.</span>
0012    <span class="comment">%</span>
0013    <span class="comment">%     if q is waveform, data values from w &amp; q are added together, assuming</span>
0014    <span class="comment">%     that each has the same number of samples.</span>
0015    <span class="comment">%</span>
0016    <span class="comment">% See also: plus, wavform/plus, fix_data_length</span>
0017    
0018    <span class="comment">% AUTHOR: Celso Reyes, Geophysical Institute, Univ. of Alaska Fairbanks</span>
0019    <span class="comment">% $Date$</span>
0020    <span class="comment">% $Revision$</span>
0021    
0022    <span class="comment">% CODE WARNING:</span>
0023    <span class="comment">% ASSUMES DATA is in w.data and is in a single column. MAY bypass GET &amp; SET</span>
0024    <span class="comment">% for speed.</span>
0025    <span class="keyword">if</span> ~isa(w,<span class="string">'waveform'</span>),
0026       n  = w; w = q; q = n;
0027       clear n
0028    <span class="keyword">end</span>
0029    
0030    array_addition = all(size(w) == size(q));
0031    scalar_addition = isscalar(q);
0032    element_addition = isvector(q) &amp;&amp; all(<a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(w(:),<span class="string">'data_length'</span>) == numel(q));
0033    
0034    <span class="keyword">for</span> n = 1:numel(w)
0035       <span class="keyword">if</span> isnumeric(q)
0036          <span class="comment">% keep out characters and character arrays because they'd be</span>
0037          <span class="comment">% converted to their ascii equivelents.  Not good.</span>
0038          <span class="comment">%</span>
0039          <span class="comment">% other numeric types, such as int32  must be converted explicetly</span>
0040          <span class="comment">% to double before the action takes place.  Also, these must be in</span>
0041          <span class="comment">% the same shape as the data column (thus the &quot;q(:)&quot;)</span>
0042          
0043          
0044          <span class="keyword">if</span> scalar_addition
0045             w(n).data = w(n).data + <a href="double.html" class="code" title="function n = double(W, option)">double</a>(q);
0046          <span class="keyword">elseif</span> array_addition
0047             w(n).data = w(n).data + <a href="double.html" class="code" title="function n = double(W, option)">double</a>(q(n));
0048          <span class="keyword">elseif</span> element_addition
0049             w(n).data = w(n).data + <a href="double.html" class="code" title="function n = double(W, option)">double</a>(q(:));
0050          <span class="keyword">else</span>
0051             <span class="keyword">if</span> all(size(w) == size(q'))
0052                error(<span class="string">'Waveform:plus:sizeMismatch'</span>,<span class="keyword">...</span>
0053                   [<span class="string">'error in dimensions: [NxM] + [MxN].\nOne possible'</span><span class="keyword">...</span>
0054                   <span class="string">' fix would be to transpose ('') one of the addends '</span>])
0055             <span class="keyword">else</span>
0056                wsize = num2str(size(w),<span class="string">'%dx'</span>); wsize = wsize(1:end-1);
0057                qsize = num2str(size(q),<span class="string">'%dx'</span>); qsize = qsize(1:end-1);
0058                error(<span class="string">'Waveform:plus:unknownOperation'</span>,<span class="keyword">...</span>
0059                   [<span class="string">'unknown waveform addition operation:\n'</span>,<span class="keyword">...</span>
0060                   <span class="string">'&lt; %s %s&gt;  + &lt;%s %s&gt;'</span>],wsize, class(w), qsize, class(q));
0061             <span class="keyword">end</span>
0062          <span class="keyword">end</span>
0063          
0064          
0065       <span class="keyword">elseif</span> isa(q,<span class="string">'waveform'</span>)
0066          <span class="keyword">if</span>  isscalar(q) &amp;&amp; ( numel(w(n).data) == numel(q.data) )
0067             w(n).data = w(n).data + q.data;
0068          <span class="keyword">else</span>
0069             error(<span class="string">'Waveform:plus:invalidDataLengths'</span>,<span class="keyword">...</span>
0070                <span class="string">'Invalid operation - data lengths are different or adding multiple waveforms'</span>);
0071          <span class="keyword">end</span>;
0072       <span class="keyword">else</span>
0073          error(<span class="string">'Waveform:plus:invalidClass'</span>,<span class="keyword">...</span>
0074             <span class="string">'unknown addition operation: %s + %s'</span>, class(w), class(q));
0075       <span class="keyword">end</span>
0076    <span class="keyword">end</span>
0077 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>