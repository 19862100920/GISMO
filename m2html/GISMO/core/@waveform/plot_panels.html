<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plot_panels</title>
  <meta name="keywords" content="plot_panels">
  <meta name="description" content="PLOT_PANELS Plot multiple waveform objects as separate linked panels">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">GISMO</a> &gt; <a href="#">core</a> &gt; <a href="index.html">@waveform</a> &gt; plot_panels.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/core/@waveform&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>plot_panels
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>PLOT_PANELS Plot multiple waveform objects as separate linked panels</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function fh=plot_panels(w, alignWaveforms) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PLOT_PANELS Plot multiple waveform objects as separate linked panels
   PLOT_PANELS(w, alignWaveforms) 
   where:
       w = a vector of waveform objects
       alignWaveforms is either true or false (default)
   PLOT_PANELS(w) will plot each waveform is plotted against absolute time.
   PLOT_PANELS(w, true) will align the waveforms on their start times.

 Along the top of each trace are displayed 3 numbers in different colors:
   blue - the mean offset of the trace
   green - the start date/time of the trace
   red - the maximum amplitude of the trace</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>	CATALOG.PLOT Plot hypocenters in map view and cross-sections</li><li><a href="../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/@correlation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>	SET Set properties for correlation object</li><li><a href="../../../GISMO/core/@datasource/get.html" class="code" title="function val = get(ds, propertyname)">get</a>	</li><li><a href="../../../GISMO/core/@drumplot/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get drumplot properties</li><li><a href="../../../GISMO/core/@drumplot/plot.html" class="code" title="function varargout = plot(h)">plot</a>	PLOT: Drumplot plotting function. A drumplot object (h) contains no</li><li><a href="../../../GISMO/core/@drumplot/set.html" class="code" title="function h = set(h,varargin)">set</a>	SET: Set drumplot properties</li><li><a href="../../../GISMO/core/@filterobject/get.html" class="code" title="function val = get(f, prop_name)">get</a>	GET - Get filterobject properties</li><li><a href="../../../GISMO/core/@filterobject/set.html" class="code" title="function f = set(f, varargin)">set</a>	SET - Set filterobject properties</li><li><a href="../../../GISMO/core/@rsam/plot.html" class="code" title="function handlePlot = plot(rsam_vector, varargin)">plot</a>	RSAM/PLOT plot rsam data</li><li><a href="../../../GISMO/core/@scnlobject/get.html" class="code" title="function stuff = get(scnl, prop_name)">get</a>	GET for the scnl object</li><li><a href="../../../GISMO/core/@scnlobject/set.html" class="code" title="function scnl = set(scnl, varargin)">set</a>	SET - Set properties for scnlobject</li><li><a href="../../../GISMO/core/@spectralobject/get.html" class="code" title="function out = get(s, prop_name)">get</a>	GET - Get properties for spectralobject</li><li><a href="../../../GISMO/core/@spectralobject/set.html" class="code" title="function s = set(s, varargin)">set</a>	SET - Set properties for spectralobject</li><li><a href="../../../GISMO/core/@threecomp/get.html" class="code" title="function val = get(TC,varargin)">get</a>	GET    Get threecomp object properties.</li><li><a href="../../../GISMO/core/@threecomp/plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>	PLOT plots a threecomp object</li><li><a href="../../../GISMO/core/@threecomp/set.html" class="code" title="function TC = set(TC, fieldName, val)">set</a>	SET inserts properties for threecomp object</li><li><a href="abs.html" class="code" title="function w = abs(w)">abs</a>	ABS Absolute value for the waveform object</li><li><a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>	GET Get waveform properties</li><li><a href="gettimerange.html" class="code" title="function [startTimeList endTimeList] = gettimerange(w)">gettimerange</a>	GETTIMERANGE returns the list of start and end times from a waveform array</li><li><a href="min.html" class="code" title="function [Y, I] = min(w)">min</a>	MIN    Smallest value of a waveform.</li><li><a href="plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>	PLOT plots a waveform object</li><li><a href="set.html" class="code" title="function w = set(w, varargin)">set</a>	SET Set properties for waveform object(s)</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>	SET Set properties for correlation object</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/plot.html" class="code" title="function varargout = plot(T, varargin)">plot</a>	plot   plots a SeismicTrace</li><li><a href="../../../GISMO/deprecated/@helicorder/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get helicorder properties</li><li><a href="../../../GISMO/deprecated/@helicorder/set.html" class="code" title="function h = set(h,varargin)">set</a>	SET: Set helicorder properties</li><li><a href="../../../GISMO/deprecated/fft_tools/+wf_fft/plot.html" class="code" title="function plot(w)">plot</a>	PLOT plot fourier transform of a waveform</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/training/gismo_examples.html" class="code" title="">gismo_examples</a>	Standard clearing MATLAB workspace & command window, closing figures</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function daterange(obj, evt, snum, SECSPERDAY)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function fh=plot_panels(w, alignWaveforms)</a>
0002 <span class="comment">%PLOT_PANELS Plot multiple waveform objects as separate linked panels</span>
0003 <span class="comment">%   PLOT_PANELS(w, alignWaveforms)</span>
0004 <span class="comment">%   where:</span>
0005 <span class="comment">%       w = a vector of waveform objects</span>
0006 <span class="comment">%       alignWaveforms is either true or false (default)</span>
0007 <span class="comment">%   PLOT_PANELS(w) will plot each waveform is plotted against absolute time.</span>
0008 <span class="comment">%   PLOT_PANELS(w, true) will align the waveforms on their start times.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% Along the top of each trace are displayed 3 numbers in different colors:</span>
0011 <span class="comment">%   blue - the mean offset of the trace</span>
0012 <span class="comment">%   green - the start date/time of the trace</span>
0013 <span class="comment">%   red - the maximum amplitude of the trace</span>
0014 
0015 <span class="comment">% Glenn Thompson 2014/11/05, generalized after a function written in 2000</span>
0016 <span class="comment">% to operate on Seisan files only</span>
0017 
0018     <span class="keyword">if</span> numel(w)==0
0019         warning(<span class="string">'no waveforms to plot'</span>)
0020         <span class="keyword">return</span>
0021     <span class="keyword">end</span>
0022     
0023     <span class="keyword">if</span> ~exist(<span class="string">'alignWaveforms'</span>, <span class="string">'var'</span>)
0024             alignWaveforms = false;
0025     <span class="keyword">end</span>
0026     
0027     <span class="comment">% get the first start time and last end time</span>
0028     [starttimes endtimes]=<a href="gettimerange.html" class="code" title="function [startTimeList endTimeList] = gettimerange(w)">gettimerange</a>(w);
0029     snum = nanmin(starttimes);
0030     enum = nanmax(endtimes);
0031     
0032     <span class="comment">% get the longest duration - in mode=='align'</span>
0033     durations = endtimes - starttimes;
0034     maxduration = nanmax(durations);
0035     SECSPERDAY = 60 * 60 * 24;
0036     
0037     nwaveforms = numel(w);
0038     fh=figure;
0039     trace_height=0.9/nwaveforms;
0040     left=0.1;
0041     width=0.8;
0042     <span class="keyword">for</span> wavnum = 1:nwaveforms
0043         data=<a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(w(wavnum),<span class="string">'data'</span>);
0044         dnum=<a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(w(wavnum),<span class="string">'timevector'</span>); 
0045         <span class="keyword">try</span>
0046             sta=<a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(w(wavnum),<span class="string">'station'</span>);
0047             chan=<a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(w(wavnum),<span class="string">'channel'</span>);
0048         <span class="keyword">catch</span>
0049             sta=<span class="string">''</span>;
0050             chan=<span class="string">''</span>;
0051         <span class="keyword">end</span>
0052         offset = nanmean(data);
0053         y=data-offset;
0054         ax(wavnum)=axes(<span class="string">'Position'</span>,[left 0.98-wavnum*trace_height width trace_height]);   
0055         <span class="keyword">if</span> alignWaveforms
0056             <a href="plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>((dnum-<a href="min.html" class="code" title="function [Y, I] = min(w)">min</a>(dnum))*SECSPERDAY, y,<span class="string">'-k'</span>);
0057             <a href="set.html" class="code" title="function w = set(w, varargin)">set</a>(gca, <span class="string">'XLim'</span>, [0 maxduration*SECSPERDAY]);
0058         <span class="keyword">else</span>
0059             <a href="plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>((dnum-snum)*SECSPERDAY, y,<span class="string">'-k'</span>);
0060             <a href="set.html" class="code" title="function w = set(w, varargin)">set</a>(gca, <span class="string">'XLim'</span>, [0 enum-snum]*SECSPERDAY);
0061         <span class="keyword">end</span>
0062 <span class="comment">%         xlim = get(gca, 'XLim');</span>
0063 <span class="comment">%         set(gca,'XTick', linspace(xlim(1), xlim(2), 11));</span>
0064         ylabel(sprintf(<span class="string">'%s\n%s '</span>,sta,chan),<span class="string">'FontSize'</span>,10,<span class="string">'Rotation'</span>,90);
0065         <a href="set.html" class="code" title="function w = set(w, varargin)">set</a>(gca,<span class="string">'YTick'</span>,[],<span class="string">'YTickLabel'</span>,[<span class="string">''</span>]);
0066         <span class="keyword">if</span> wavnum&lt;nwaveforms;
0067            <a href="set.html" class="code" title="function w = set(w, varargin)">set</a>(gca,<span class="string">'XTickLabel'</span>,[<span class="string">''</span>]);
0068         <span class="keyword">end</span>
0069         
0070         <span class="comment">% display mean on left, max on right</span>
0071         
0072         text(0.02,0.85, sprintf(<span class="string">'%5.0f'</span>,offset),<span class="string">'FontSize'</span>,10,<span class="string">'Color'</span>,<span class="string">'b'</span>,<span class="string">'units'</span>,<span class="string">'normalized'</span>);
0073         text(0.4,0.85,sprintf(<span class="string">' %s'</span>,datestr(starttimes(wavnum),30)),<span class="string">'FontSize'</span>,10,<span class="string">'Color'</span>,<span class="string">'g'</span>,<span class="string">'units'</span>,<span class="string">'normalized'</span>);
0074         text(0.9,0.85,sprintf(<span class="string">'%5.0f'</span>,nanmax(<a href="abs.html" class="code" title="function w = abs(w)">abs</a>(y))),<span class="string">'FontSize'</span>,10,<span class="string">'Color'</span>,<span class="string">'r'</span>,<span class="string">'units'</span>,<span class="string">'normalized'</span>);
0075     <span class="keyword">end</span>
0076     xlabel(<span class="string">'Time (s)'</span>);
0077     <span class="keyword">if</span> exist(<span class="string">'ax'</span>,<span class="string">'var'</span>)
0078         linkaxes(ax,<span class="string">'x'</span>);
0079         
0080         <span class="comment">% enable update x tick labels after zoom</span>
0081 <span class="comment">%         h = zoom(gcf);</span>
0082 <span class="comment">%         set(h,'ActionPostCallback',{@myzoomcallback,ax});</span>
0083 <span class="comment">%         set(h,'Enable','on');</span>
0084 
0085     <span class="keyword">end</span>
0086 
0087     
0088     originalXticks = <a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(gca,<span class="string">'XTickLabel'</span>);
0089     
0090     f = uimenu(<span class="string">'Label'</span>,<span class="string">'X-Ticks'</span>);
0091 <span class="comment">%     uimenu(f,'Label','seconds since start time','Callback',{@secondssince, originalXticks});</span>
0092 <span class="comment">%     uimenu(f,'Label','absolute time','Callback',{@datetickplot, snum, SECSPERDAY});</span>
0093     uimenu(f,<span class="string">'Label'</span>,<span class="string">'time range'</span>,<span class="string">'Callback'</span>,{@<a href="#_sub1" class="code" title="subfunction daterange(obj, evt, snum, SECSPERDAY)">daterange</a>, snum, SECSPERDAY});
0094     uimenu(f,<span class="string">'Label'</span>,<span class="string">'quit'</span>,<span class="string">'Callback'</span>,<span class="string">'disp(''exit'')'</span>,<span class="keyword">...</span><span class="comment"> </span>
0095            <span class="string">'Separator'</span>,<span class="string">'on'</span>,<span class="string">'Accelerator'</span>,<span class="string">'Q'</span>);
0096 <span class="keyword">end</span>
0097 
0098 <a name="_sub1" href="#_subfunctions" class="code">function daterange(obj, evt, snum, SECSPERDAY)</a>
0099     xlim = <a href="get.html" class="code" title="function val = get(w,prop_name)">get</a>(gca, <span class="string">'xlim'</span>);
0100     xticks = linspace(xlim(1), xlim(2), 11);
0101     dnum = snum + xlim/SECSPERDAY;
0102     datestr(dnum,<span class="string">'yyyy-mm-dd HH:MM:SS.FFF'</span>)
0103 <span class="keyword">end</span>
0104 
0105</pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>