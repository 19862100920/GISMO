<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of match</title>
  <meta name="keywords" content="match">
  <meta name="description" content="Retain matching elements of two correlation objects.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">GISMO</a> &gt; <a href="#">core</a> &gt; <a href="#">dev</a> &gt; <a href="index.html">@NewCorrelation</a> &gt; match.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/core/dev/@NewCorrelation&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>match
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Retain matching elements of two correlation objects.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function [c1,c2] = match(c1,c2,toleranceInSeconds) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">Retain matching elements of two correlation objects.

 [C1,C2] = MATCH(C1,C2) Returns those elements of c1 and c2 which have
 matching trigger times. Typically this will be used to sync correlation
 objects from two different stations covering the same time frames, or
 sync'ing two channels from the same station.

 [C1,C2] = MATCH(C1,C2,TOLERANCE) allows traces to match when their
 trigger times are within TOLERANCE seconds of each other. When this
 parameter is not included, the default value is 1 second.

 CAVEATS: Note that if C2 has multiple traces which match a trigger time
 in C1, there is no way of controling which single trace in C2 will be
 considered a match. Similarly, if C1 contains multiple traces with the
 same trigger time, a match for each one will be found in C2.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../GISMO/core/@Catalog/disp.html" class="code" title="function disp(obj, showall)">disp</a>	CATALOG.DISP Display Catalog object</li><li><a href="../../../../GISMO/core/@Catalog/subset.html" class="code" title="function catalogObject2 = subset(catalogObject, indices)">subset</a>	CATALOG.SUBSET Create a new catalogObject by subsetting based</li><li><a href="../../../../GISMO/core/@correlation/find.html" class="code" title="function index = find(c,varargin)">find</a>	INDEX = FIND(c,'CLUST',WHICH_CLUSTER)</li><li><a href="../../../../GISMO/core/@correlation/subset.html" class="code" title="function c = subset(c,index)">subset</a>	c = SUBSET(c,INDEX)</li><li><a href="../../../../GISMO/core/@datasource/disp.html" class="code" title="function disp(ds)">disp</a>	DISP Datasource disp overloaded operator</li><li><a href="../../../../GISMO/core/@filterobject/disp.html" class="code" title="function disp(f)">disp</a>	DISP - Filterobject disp overloaded operator</li><li><a href="../../../../GISMO/core/@scnlobject/disp.html" class="code" title="function disp(sncl)">disp</a>	DISP - scnl disp overloaded operator</li><li><a href="../../../../GISMO/core/@spectralobject/disp.html" class="code" title="function disp(s)">disp</a>	DISP - spectralobject disp overloaded operator</li><li><a href="../../../../GISMO/core/@threecomp/disp.html" class="code" title="function disp(TC)">disp</a>	DISP Display threecomp object</li><li><a href="../../../../GISMO/core/@waveform/abs.html" class="code" title="function w = abs(w)">abs</a>	ABS Absolute value for the waveform object</li><li><a href="../../../../GISMO/core/@waveform/disp.html" class="code" title="function disp(w)">disp</a>	DISP Waveform disp overloaded operator</li><li><a href="../../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>	MIN    Smallest value of a waveform.</li><li><a href="disp.html" class="code" title="function disp(c)">disp</a>	CORRELATION/DISPLAY Command window display of a correlation object</li><li><a href="find.html" class="code" title="function index = find(c, type, value)">find</a>	INDEX = FIND(c,'CLUST',WHICH_CLUSTER)</li><li><a href="subset.html" class="code" title="function c = subset(c,index)">subset</a>	c = SUBSET(c,INDEX)</li><li><a href="../../../../GISMO/core/dev/@SeismicTrace/disp.html" class="code" title="function disp(T)">disp</a>	disp   Display information about SeismicTrace(s)</li><li><a href="../../../../GISMO/deprecated/@helicorder/disp.html" class="code" title="function disp(h)">disp</a>	DISP: Helicorder disp overloaded operator</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../GISMO/contributed/master_correlation/+mastercorr/cookbook.html" class="code" title="">cookbook</a>	COOKBOOK demonstrate the features of the mastercorr package.</li><li><a href="../../../../GISMO/contributed/master_correlation/mastercorr_cookbook.html" class="code" title="">mastercorr_cookbook</a>	Demonstration of the major features of the master waveform correlation</li><li><a href="NewCorrelation.html" class="code" title="">NewCorrelation</a>	</li><li><a href="../../../../GISMO/deprecated/@helicorder/private/SST/compare_sst.html" class="code" title="function match = compare_sst(sst_1,sst_2)">compare_sst</a>	</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [c1,c2] = match(c1,c2,toleranceInSeconds)</a>
0002    
0003    <span class="comment">%Retain matching elements of two correlation objects.</span>
0004    <span class="comment">%</span>
0005    <span class="comment">% [C1,C2] = MATCH(C1,C2) Returns those elements of c1 and c2 which have</span>
0006    <span class="comment">% matching trigger times. Typically this will be used to sync correlation</span>
0007    <span class="comment">% objects from two different stations covering the same time frames, or</span>
0008    <span class="comment">% sync'ing two channels from the same station.</span>
0009    <span class="comment">%</span>
0010    <span class="comment">% [C1,C2] = MATCH(C1,C2,TOLERANCE) allows traces to match when their</span>
0011    <span class="comment">% trigger times are within TOLERANCE seconds of each other. When this</span>
0012    <span class="comment">% parameter is not included, the default value is 1 second.</span>
0013    <span class="comment">%</span>
0014    <span class="comment">% CAVEATS: Note that if C2 has multiple traces which match a trigger time</span>
0015    <span class="comment">% in C1, there is no way of controling which single trace in C2 will be</span>
0016    <span class="comment">% considered a match. Similarly, if C1 contains multiple traces with the</span>
0017    <span class="comment">% same trigger time, a match for each one will be found in C2.</span>
0018    
0019    <span class="comment">% AUTHOR: Michael West, Geophysical Institute, Univ. of Alaska Fairbanks</span>
0020    <span class="comment">% $Date$</span>
0021    <span class="comment">% $Revision$</span>
0022       
0023    narginchk(2,3);
0024    
0025    <span class="keyword">if</span> ~exist(<span class="string">'tolerance'</span>,<span class="string">'var'</span>)
0026       toleranceInSeconds = 1;
0027    <span class="keyword">end</span>
0028    
0029    assert(isnumeric(toleranceInSeconds), <span class="string">'Tolerance must be a number in seconds'</span>)
0030    
0031    <a href="disp.html" class="code" title="function disp(c)">disp</a>([<span class="string">'Tolerance for successful match is: '</span> num2str(toleranceInSeconds) <span class="string">' seconds'</span>]);
0032    
0033    
0034    <span class="comment">% FIND ELEMENTS THAT MATCH</span>
0035    trig1 = c1.trig;
0036    trig2 = c2.trig;
0037    matchIndex = zeros(size(trig1));
0038    <span class="keyword">for</span> n = 1:numel(trig1)
0039       [minVal,minIndex] = <a href="../../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>(<a href="../../../../GISMO/core/@waveform/abs.html" class="code" title="function w = abs(w)">abs</a>(trig2 - trig1(n))*86400);
0040       <span class="keyword">if</span> minVal &lt; toleranceInSeconds
0041          matchIndex(n) = minIndex;
0042       <span class="keyword">else</span>
0043          matchIndex(n) = 0;
0044       <span class="keyword">end</span>
0045    <span class="keyword">end</span>
0046    
0047    
0048    <span class="comment">% SUBSET FIRST CORRELATION OBJECT</span>
0049    index = <a href="find.html" class="code" title="function index = find(c, type, value)">find</a>(matchIndex);
0050    c1 = <a href="subset.html" class="code" title="function c = subset(c,index)">subset</a>(c1,index);
0051    
0052    <span class="comment">% SUBSET FIRST CORRELATION OBJECT</span>
0053    index2 = matchIndex(index);
0054    c2 = <a href="subset.html" class="code" title="function c = subset(c,index)">subset</a>(c2,index2);
0055    
0056 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>