<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plot</title>
  <meta name="keywords" content="plot">
  <meta name="description" content="PLOT: Drumplot plotting function. A drumplot object (h) contains no">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">GISMO</a> &gt; <a href="#">core</a> &gt; <a href="index.html">@drumplot</a> &gt; plot.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/core/@drumplot&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>plot
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>PLOT: Drumplot plotting function. A drumplot object (h) contains no</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function varargout = plot(h) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PLOT: Drumplot plotting function. A drumplot object (h) contains no
  graphical elements, but is instead a blueprint for how the drumplot
  figure should be assembled. Information in h includes waveform data,
  number of minutes per line, color scheme, multi-waveform display type,
  and a Catalog object to highlight over the drumplot. Calling plot(h) will
  assemble the drumplot figure based the information in h. Plot returns
  the figure handle if an output argument is provided, otherwise, there is
  no output.

USAGE: plot(h) --&gt; Create drumplot figure from drumplot object
       fh = plot(h) --&gt; Also return drumplot figure handle

INPUTS: h - drumplot object
                           
OUTPUTS: fh - figure handle of drumplot

 See also <a href="drumplot.html" class="code" title="">DRUMPLOT</a>

 Author: Dane Ketner, Alaska Volcano Observatory
 Modified: Glenn Thompson 2016-04-19
 $Date$
 $Revision$</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/contributed/master_correlation/+mastercorr/extract.html" class="code" title="function varargout = extract(W,varargin)">extract</a>	EXTRACT extract matches to the master waveform</li><li><a href="../../../GISMO/core/+admin/refresh.html" class="code" title="function refresh()">refresh</a>	REFRESH refresh all paths in GISMO</li><li><a href="../../../GISMO/core/@Catalog/combine.html" class="code" title="function catalogObject = combine(catalogObject1, catalogObject2)">combine</a>	CATALOG.COMBINE combine two Catalog objects</li><li><a href="../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>	CATALOG.PLOT Plot hypocenters in map view and cross-sections</li><li><a href="../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/@correlation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../GISMO/core/@correlation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>	SET Set properties for correlation object</li><li><a href="../../../GISMO/core/@datasource/get.html" class="code" title="function val = get(ds, propertyname)">get</a>	</li><li><a href="get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get drumplot properties</li><li><a href="plot.html" class="code" title="function varargout = plot(h)">plot</a>	PLOT: Drumplot plotting function. A drumplot object (h) contains no</li><li><a href="set.html" class="code" title="function h = set(h,varargin)">set</a>	SET: Set drumplot properties</li><li><a href="../../../GISMO/core/@filterobject/get.html" class="code" title="function val = get(f, prop_name)">get</a>	GET - Get filterobject properties</li><li><a href="../../../GISMO/core/@filterobject/set.html" class="code" title="function f = set(f, varargin)">set</a>	SET - Set filterobject properties</li><li><a href="../../../GISMO/core/@rsam/extract.html" class="code" title="function s=extract(self, snum, enum)">extract</a>	</li><li><a href="../../../GISMO/core/@rsam/plot.html" class="code" title="function handlePlot = plot(rsam_vector, varargin)">plot</a>	RSAM/PLOT plot rsam data</li><li><a href="../../../GISMO/core/@scnlobject/get.html" class="code" title="function stuff = get(scnl, prop_name)">get</a>	GET for the scnl object</li><li><a href="../../../GISMO/core/@scnlobject/set.html" class="code" title="function scnl = set(scnl, varargin)">set</a>	SET - Set properties for scnlobject</li><li><a href="../../../GISMO/core/@spectralobject/get.html" class="code" title="function out = get(s, prop_name)">get</a>	GET - Get properties for spectralobject</li><li><a href="../../../GISMO/core/@spectralobject/set.html" class="code" title="function s = set(s, varargin)">set</a>	SET - Set properties for spectralobject</li><li><a href="../../../GISMO/core/@threecomp/extract.html" class="code" title="function pm = extract(TC,varargin)">extract</a>	EXTRACT particle motion parameters from a threecomp object</li><li><a href="../../../GISMO/core/@threecomp/get.html" class="code" title="function val = get(TC,varargin)">get</a>	GET    Get threecomp object properties.</li><li><a href="../../../GISMO/core/@threecomp/isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>	ISEMPTY Display threecomp object</li><li><a href="../../../GISMO/core/@threecomp/plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>	PLOT plots a threecomp object</li><li><a href="../../../GISMO/core/@threecomp/set.html" class="code" title="function TC = set(TC, fieldName, val)">set</a>	SET inserts properties for threecomp object</li><li><a href="../../../GISMO/core/@waveform/combine.html" class="code" title="function combined_waveforms = combine (waveformlist)">combine</a>	COMBINE merges waveforms based on start/end times and ChannelTag info.</li><li><a href="../../../GISMO/core/@waveform/extract.html" class="code" title="function outW = extract(w, method, startV, endV)">extract</a>	EXTRACT creates a waveform with a subset of another's data.</li><li><a href="../../../GISMO/core/@waveform/get.html" class="code" title="function val = get(w,prop_name)">get</a>	GET Get waveform properties</li><li><a href="../../../GISMO/core/@waveform/gettimerange.html" class="code" title="function [startTimeList endTimeList] = gettimerange(w)">gettimerange</a>	GETTIMERANGE returns the list of start and end times from a waveform array</li><li><a href="../../../GISMO/core/@waveform/isempty.html" class="code" title="function TF = isempty(w)">isempty</a>	ISEMPTY returns TRUE if waveform contains no data</li><li><a href="../../../GISMO/core/@waveform/pad.html" class="code" title="function [ w ] = pad( w, snum, enum, padvalue )">pad</a>	PAD Pad a waveform from snum to enum</li><li><a href="../../../GISMO/core/@waveform/plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>	PLOT plots a waveform object</li><li><a href="../../../GISMO/core/@waveform/set.html" class="code" title="function w = set(w, varargin)">set</a>	SET Set properties for waveform object(s)</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/set.html" class="code" title="function c = set(c, prop_name, val)">set</a>	SET Set properties for correlation object</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/plot.html" class="code" title="function varargout = plot(T, varargin)">plot</a>	plot   plots a SeismicTrace</li><li><a href="../../../GISMO/deprecated/@helicorder/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get helicorder properties</li><li><a href="../../../GISMO/deprecated/@helicorder/set.html" class="code" title="function h = set(h,varargin)">set</a>	SET: Set helicorder properties</li><li><a href="../../../GISMO/deprecated/fft_tools/+wf_fft/plot.html" class="code" title="function plot(w)">plot</a>	PLOT plot fourier transform of a waveform</li><li><a href="../../../GISMO/libgismo/ceilminute.html" class="code" title="function dnum=ceilminute(dnum, nummins)">ceilminute</a>	CEILMINUTE round up datenum to next minute mark</li><li><a href="../../../GISMO/libgismo/floorminute.html" class="code" title="function dnum=floorminute(dnum,nummins)">floorminute</a>	FLOORMINUTE round up datenum to next minute mark</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/applications/+iceweb/spectrogram_iceweb.html" class="code" title="function [result,Tcell,Fcell,Ycell] = spectrogram_iceweb(s, w, spectrogramFraction, mycolormap)">spectrogram_iceweb</a>	SPECTROGRAM_ICEWEB produce an multi-channel spectrogram plot in the style of</li><li><a href="../../../GISMO/applications/uispecgram.html" class="code" title="function varargout = uispecgram(varargin)">uispecgram</a>	UISPECGRAM M-file for uispecgram.fig</li><li><a href="../../../GISMO/contributed/correlation_derived/corrderived_plot_swarm_history.html" class="code" title="function corrderived_plot_swarm_history(c,varargin)">corrderived_plot_swarm_history</a>	CORRDERIVED_PLOT_SWARM_HISTORY plots relevent details of seismic swarms</li><li><a href="../../../GISMO/contributed/instrument_response/demo_plutons.html" class="code" title="">demo_plutons</a>	</li><li><a href="../../../GISMO/contributed/instrument_response/response_cookbook.html" class="code" title="">response_cookbook</a>	% Instrument response cookbook</li><li><a href="../../../GISMO/contributed/instrument_response/response_plot.html" class="code" title="function response_plot(response,xLimits,noLegend)">response_plot</a>	RESPONSE_PLOT plot an instrument response</li><li><a href="../../../GISMO/contributed/master_correlation/+mastercorr/cookbook.html" class="code" title="">cookbook</a>	COOKBOOK demonstrate the features of the mastercorr package.</li><li><a href="../../../GISMO/contributed/master_correlation/+mastercorr/plot_stats.html" class="code" title="function plot_stats(W)">plot_stats</a>	PLOT_STATS plot statistics from master correlation algorithm</li><li><a href="../../../GISMO/contributed/master_correlation/mastercorr_cookbook.html" class="code" title="">mastercorr_cookbook</a>	Demonstration of the major features of the master waveform correlation</li><li><a href="../../../GISMO/contributed/master_correlation/mastercorr_plot_stats.html" class="code" title="function mastercorr_plot_stats(W)">mastercorr_plot_stats</a>	MASTERCORR_PLOT_STATS plot statistics from master correlation algorithm</li><li><a href="../../../GISMO/contributed_antelope/attenuation/hankelq.html" class="code" title="function hankelq(dbpath, expr, f1, f2, pretrigger, posttrigger, max_arrivals)">hankelq</a>	HANKELQ Compute spectral ratio in two frequency bands</li><li><a href="../../../GISMO/contributed_antelope/traveltime_and_ray_coverage/+ttimes/depth_section.html" class="code" title="function depth_section(dbName)">depth_section</a>	DEPTH_SECTION plot depth sections of ray coverage.</li><li><a href="../../../GISMO/core/+Detection/sta_lta.html" class="code" title="function [cobj,sta,lta,sta_to_lta] = sta_lta(wave,varargin)">sta_lta</a>	STA_LTA: Short-Time-Average/Long-Time-Average event detector.</li><li><a href="../../../GISMO/core/@Catalog/Catalog.html" class="code" title="">Catalog</a>	CATALOG the blueprint for Catalog objects in GISMO</li><li><a href="../../../GISMO/core/@Catalog/plotprmm.html" class="code" title="function plotprmm(catalogObject)">plotprmm</a>	CATALOG.PLOTPRMM Plot the peak rate and maximum magnitude of a</li><li><a href="../../../GISMO/core/@EventRate/EventRate.html" class="code" title="">EventRate</a>	</li><li><a href="../../../GISMO/core/@EventRate/cookbook.html" class="code" title="">cookbook</a>	% EventRate Cookbook</li><li><a href="../../../GISMO/core/@correlation/cookbook.html" class="code" title="function correlationVariables = cookbook(corr)">cookbook</a>	% Correlation object cookbook</li><li><a href="../../../GISMO/core/@correlation/private/dendrogramplot.html" class="code" title="function dendrogramplot(c);">dendrogramplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/eventplot.html" class="code" title="function eventplot(c,scale,howmany);">eventplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/occurrenceplot.html" class="code" title="function occurrenceplot(c,scale,clusternum)">occurrenceplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/overlayplot.html" class="code" title="function overlayplot(c,scale,ord)">overlayplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/sampleplot.html" class="code" title="function sampleplot(c,scale,ord)">sampleplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/statplot.html" class="code" title="function statplot(c);">statplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/wiggleinterferogram.html" class="code" title="function wiggleinterferogram(c,scale,type,norm,range)">wiggleinterferogram</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/@correlation/private/wiggleplot.html" class="code" title="function wiggleplot(c,scale,ord,norm)">wiggleplot</a>	Private method. See ../plot for details.</li><li><a href="cookbook.html" class="code" title="">cookbook</a>	% drumplot cookbook</li><li><a href="drumplot.html" class="code" title="">drumplot</a>	DRUMPLOT the blueprint for drumplot objects in GISMO</li><li><a href="plot.html" class="code" title="function varargout = plot(h)">plot</a>	PLOT: Drumplot plotting function. A drumplot object (h) contains no</li><li><a href="../../../GISMO/core/@rsam/detectTremorEvents.html" class="code" title="function rsamobj = detectTremorEvents(stationName, chan, DP, snum, enum, spikeRatio, transientEventRatio, STA_minutes, LTA_minutes, stepsize, ratio_on, ratio_off, plotResults)">detectTremorEvents</a>	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</li><li><a href="../../../GISMO/core/@rsam/duration_amplitude.html" class="code" title="function [lambda, r2] = duration_amplitude(self, law, min_amplitude, mag_zone)">duration_amplitude</a>	DURATION_AMPLITUDE Use the duration-amplitde</li><li><a href="../../../GISMO/core/@rsam/oneMinuteData.html" class="code" title="">oneMinuteData</a>	</li><li><a href="../../../GISMO/core/@rsam/plot.html" class="code" title="function handlePlot = plot(rsam_vector, varargin)">plot</a>	RSAM/PLOT plot rsam data</li><li><a href="../../../GISMO/core/@rsam/plotrsam.html" class="code" title="function [rsamobjects, ah]=plotrsam(sta, chan, snum, enum, DATAPATH)">plotrsam</a>	[rsamobjects, ah]=plotrsam_wrapper(sta, chan, snum, enum, DATAPATH)</li><li><a href="../../../GISMO/core/@rsam/rsam.html" class="code" title="">rsam</a>	</li><li><a href="../../../GISMO/core/@rsam/scrollplot.html" class="code" title="function scrollplot(s)">scrollplot</a>	Created by Steven Lord, slord@mathworks.com</li><li><a href="../../../GISMO/core/@spectralobject/specgram2.html" class="code" title="function specgram2(s, ws, varargin)">specgram2</a>	SPECGRAM2 - plots spectrograms of waveforms with waveform along top</li><li><a href="../../../GISMO/core/@threecomp/cookbook.html" class="code" title="function cookbook(TC)">cookbook</a>	This cookbook contains sample code to illustrate the basic functions of</li><li><a href="../../../GISMO/core/@threecomp/cookbook_map.html" class="code" title="function cookbook_map(TC,W,backAzimuth)">cookbook_map</a>	COOKBOOK_MAP Plots a simple map to accompany cookbook data</li><li><a href="../../../GISMO/core/@threecomp/plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>	PLOT plots a threecomp object</li><li><a href="../../../GISMO/core/@threecomp/plot2.html" class="code" title="function fh=plot2(TC,varargin)">plot2</a>	PLOT2 a figure of three component traces (deprecated).</li><li><a href="../../../GISMO/core/@threecomp/plotpm.html" class="code" title="function plotpm(TC);">plotpm</a>	PLOTPM Plot particle motion coefficients.</li><li><a href="../../../GISMO/core/@threecomp/private/create_demo_data.html" class="code" title="">create_demo_data</a>	This script was used once to create the demo dataset</li><li><a href="../../../GISMO/core/@threecomp/spin.html" class="code" title="function [TC,c2, c3] = spin(TCin,varargin)">spin</a>	SPIN rotate and plot horizontal components</li><li><a href="../../../GISMO/core/@waveform/plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>	PLOT plots a waveform object</li><li><a href="../../../GISMO/core/@waveform/plot_helicorder.html" class="code" title="function [ output_args ] = plot_helicorder( w, varargin )">plot_helicorder</a>	WAVEFORM/PLOT_HELICORDER Plot waveform objects as helicorders</li><li><a href="../../../GISMO/core/@waveform/plot_panels.html" class="code" title="function fh=plot_panels(w, alignWaveforms)">plot_panels</a>	PLOT_PANELS Plot multiple waveform objects as separate linked panels</li><li><a href="../../../GISMO/core/@waveform/plot_spectrum.html" class="code" title="function s = plot_spectrum(w)">plot_spectrum</a>	add_spectral_data Simple method to compute frequency</li><li><a href="../../../GISMO/core/@waveform/scroll.html" class="code" title="function scroll(w, timeStepSeconds)">scroll</a>	SCROLL scroll through the data in a waveform vector</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/NewCorrelation.html" class="code" title="">NewCorrelation</a>	</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/cookbook.html" class="code" title="function correlationVariables = cookbook(corr)">cookbook</a>	% Correlation object cookbook</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/dendrogramplot.html" class="code" title="function dendrogramplot(c)">dendrogramplot</a>	dendrogramplot   create a dendrogram plot</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/eventplot.html" class="code" title="function eventplot(c,scale,howmany)">eventplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/occurrenceplot.html" class="code" title="function occurrenceplot(c,scale,clusternum)">occurrenceplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/overlayplot.html" class="code" title="function overlayplot(c,scale,ord)">overlayplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/sampleplot.html" class="code" title="function sampleplot(c,scale,ord)">sampleplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/statplot.html" class="code" title="function statplot(c)">statplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/wiggleinterferogram.html" class="code" title="function wiggleinterferogram(c,scale,type,norm,range)">wiggleinterferogram</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/wiggleplot.html" class="code" title="function wiggleplot(c,scale,ord,norm)">wiggleplot</a>	Private method. See ../plot for details.</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/SeismicTrace.html" class="code" title="">SeismicTrace</a>	</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/linkedplot.html" class="code" title="function linkedplot(T, alignTraces)">linkedplot</a>	linkedplot   Plot multiple waveform objects as separate linked panels</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/plot.html" class="code" title="function varargout = plot(T, varargin)">plot</a>	plot   plots a SeismicTrace</li><li><a href="../../../GISMO/core/dev/@TraceSpectra/specgram2.html" class="code" title="function h = specgram2(s, T, varargin)">specgram2</a>	SPECGRAM2 - plots spectrograms of waveforms with waveform along top</li><li><a href="../../../GISMO/deprecated/@helicorder/build.html" class="code" title="function varargout = build(h)">build</a>	BUILD: Helicorder builder function. A helicorder object (h) contains no</li><li><a href="../../../GISMO/deprecated/fft_tools/+wf_fft/freqindex.html" class="code" title="function W = freqindex(W,varargin)">freqindex</a>	WAVEFORM = FREQINDEX(WAVEFORM) calculates the frequency index of a waveform.</li><li><a href="../../../GISMO/deprecated/fft_tools/+wf_fft/plot.html" class="code" title="function plot(w)">plot</a>	PLOT plot fourier transform of a waveform</li><li><a href="../../../GISMO/deprecated/fft_tools/wf_fftplot.html" class="code" title="function wf_fftplot(w);">wf_fftplot</a>	WF_FFTPLOT(WAVEFORM) plot fourier transform of the data.</li><li><a href="../../../GISMO/deprecated/fft_tools/wf_fi.html" class="code" title="function W = wf_fi(W,varargin)">wf_fi</a>	WAVEFORM = WF_FI(WAVEFORM) calculates the frequency index of a waveform.</li><li><a href="../../../GISMO/tests/amplitude_spectrum_test.html" class="code" title="function tests = amplitude_spectrum_test()">amplitude_spectrum_test</a>	% Main function to generate tests</li><li><a href="../../../GISMO/tests/obsolete/medfilt1_test.html" class="code" title="">medfilt1_test</a>	</li><li><a href="../../../GISMO/tests/testWaveform.html" class="code" title="">testWaveform</a>	</li><li><a href="../../../GISMO/training/gismo_examples.html" class="code" title="">gismo_examples</a>	Standard clearing MATLAB workspace & command window, closing figures</li><li><a href="../../../GISMO/uaf_internal/AEIC_AVO/+check/crossfeed.html" class="code" title="function crossfeed(varargin)">crossfeed</a>	CROSSFEED Checks for crossfeeding and duplicate data channels</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function add_title(h,B)</a></li><li><a href="#_sub2" class="code">function add_y_ticks(h,B)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = plot(h)</a>
0002 
0003 <span class="comment">%PLOT: Drumplot plotting function. A drumplot object (h) contains no</span>
0004 <span class="comment">%  graphical elements, but is instead a blueprint for how the drumplot</span>
0005 <span class="comment">%  figure should be assembled. Information in h includes waveform data,</span>
0006 <span class="comment">%  number of minutes per line, color scheme, multi-waveform display type,</span>
0007 <span class="comment">%  and a Catalog object to highlight over the drumplot. Calling plot(h) will</span>
0008 <span class="comment">%  assemble the drumplot figure based the information in h. Plot returns</span>
0009 <span class="comment">%  the figure handle if an output argument is provided, otherwise, there is</span>
0010 <span class="comment">%  no output.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%USAGE: plot(h) --&gt; Create drumplot figure from drumplot object</span>
0013 <span class="comment">%       fh = plot(h) --&gt; Also return drumplot figure handle</span>
0014 <span class="comment">%</span>
0015 <span class="comment">%INPUTS: h - drumplot object</span>
0016 <span class="comment">%</span>
0017 <span class="comment">%OUTPUTS: fh - figure handle of drumplot</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% See also DRUMPLOT</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% Author: Dane Ketner, Alaska Volcano Observatory</span>
0022 <span class="comment">% Modified: Glenn Thompson 2016-04-19</span>
0023 <span class="comment">% $Date$</span>
0024 <span class="comment">% $Revision$</span>
0025 
0026 <span class="comment">% B is the 'builder structure' which contains the following fields:</span>
0027 <span class="comment">%</span>
0028 <span class="comment">% B.fh --&gt; Figure handle of drumplot</span>
0029 <span class="comment">% B.ax --&gt; Axes handle of drumplot</span>
0030 <span class="comment">% B.scale --&gt; scaling factor to apply to each waveform</span>
0031 <span class="comment">%  the value max(w)-min(w) is scaled such</span>
0032 <span class="comment">%  that is spans 4 drumplot lines. If waveform w has a max value</span>
0033 <span class="comment">%  appearing on drumplot line 16, then that maximum point should fall</span>
0034 <span class="comment">%  near the middle of line 14 (2 lines above 16). Note that for any</span>
0035 <span class="comment">%  waveform in a drumplot, B.scale is consistant throughout (no different</span>
0036 <span class="comment">%  scaling on different lines for the same waveform). B.scale is multiplied</span>
0037 <span class="comment">%  by h.scale, which by default is equal to 1. B.scale cannot be accessed</span>
0038 <span class="comment">%  directly, but it can be increased or decreased indirectly by setting</span>
0039 <span class="comment">%  h.scale to a different value: h = set(h,'scale',2); will double the</span>
0040 <span class="comment">%  displayed amplitude assuming there is only one waveform in drumplot.</span>
0041 <span class="comment">% B.lines_per_waveform --&gt; Number of drumplot lines occupied by a single waveform</span>
0042 <span class="comment">% B.number_of_lines --&gt; Total number of drumplot lines</span>
0043 <span class="comment">% B.line_offset --&gt; Trace offset from bottom of H.ax</span>
0044 <span class="comment">% B.line_waveform_continuous --&gt; 1 waveform object per line</span>
0045 <span class="comment">% B.line_waveform_events --&gt; 1 waveform object per line set to NaN between</span>
0046 <span class="comment">%  events from Catalog</span>
0047 
0048     <span class="comment">%% INITIALIZE DRUMPLOT FIGURE</span>
0049     B.fh = figure(<span class="string">'Name'</span>,<span class="string">'Drumplot'</span>);        <span class="comment">% New drumplot figure handle</span>
0050     B.ax = axes(<span class="string">'position'</span>,[.10 .07 .83 .86]); <span class="comment">% New drumplot axes handle</span>
0051     title(B.ax,<span class="string">'Plotting Drumplot...'</span>,<span class="string">'FontSize'</span>,12)
0052     <span class="comment">%refresh(B.fh)</span>
0053     <a href="../../../GISMO/core/+admin/refresh.html" class="code" title="function refresh()">refresh</a>(gcf)
0054     pause(0.1)
0055 
0056     <span class="comment">%% INITIALIZE BUILDER STRUCTURE FIELDS</span>
0057     <span class="comment">% pad waveform object</span>
0058     [snum enum] = <a href="../../../GISMO/core/@waveform/gettimerange.html" class="code" title="function [startTimeList endTimeList] = gettimerange(w)">gettimerange</a>(h.wave);
0059     snum = <a href="../../../GISMO/libgismo/floorminute.html" class="code" title="function dnum=floorminute(dnum,nummins)">floorminute</a>(snum+1/86400, h.mpl);
0060     enum = <a href="../../../GISMO/libgismo/ceilminute.html" class="code" title="function dnum=ceilminute(dnum, nummins)">ceilminute</a>(enum-1/86400, h.mpl);
0061     
0062     <span class="comment">% find start and end times for each line</span>
0063     B.number_of_lines = 1440*(enum-snum)/h.mpl;
0064     days_per_line = (enum-snum)/B.number_of_lines;
0065     B.starttimes=snum:days_per_line:enum-days_per_line;
0066     B.endtimes=snum+days_per_line:days_per_line:enum;
0067     
0068     <span class="comment">% split h.wave into one waveform per line for continuous data</span>
0069     B.line_waveform_continuous = <a href="../../../GISMO/contributed/master_correlation/+mastercorr/extract.html" class="code" title="function varargout = extract(W,varargin)">extract</a>(h.wave, <span class="string">'time'</span>, B.starttimes, B.endtimes);
0070     
0071     <span class="comment">% if there are catalog events, add waveform objects, return one waveform per line for event data</span>
0072     B.line_waveform_events = [];
0073     <span class="keyword">if</span> h.catalog.numberOfEvents &gt; 0
0074         <span class="keyword">if</span> <a href="../../../GISMO/core/@threecomp/isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>(h.catalog.waveforms)
0075             h.catalog = h.catalog.addwaveforms(h.wave);
0076         <span class="keyword">end</span>
0077         w = [h.catalog.waveforms{1,:}];
0078         w = <a href="../../../GISMO/core/@Catalog/combine.html" class="code" title="function catalogObject = combine(catalogObject1, catalogObject2)">combine</a>(w);
0079         w = <a href="../../../GISMO/core/@waveform/pad.html" class="code" title="function [ w ] = pad( w, snum, enum, padvalue )">pad</a>(w, snum, enum, NaN);
0080         B.line_waveform_events = <a href="../../../GISMO/contributed/master_correlation/+mastercorr/extract.html" class="code" title="function varargout = extract(W,varargin)">extract</a>(w, <span class="string">'time'</span>, B.starttimes, B.endtimes);
0081         clear w
0082     <span class="keyword">end</span>
0083     
0084     <span class="comment">% now we just need to plot each line with an appropriate offset</span>
0085     
0086     <span class="comment">% scaling</span>
0087     y = <a href="get.html" class="code" title="function val = get(h,prop_name)">get</a>(h.wave, <span class="string">'data'</span>);
0088     max_amplitude = (nanmax(y)-nanmin(y))/2;
0089     B.scale=h.scale/(B.number_of_lines*max_amplitude);
0090 
0091     <span class="comment">%% PLOT DRUMPLOT TRACES WITH EVENT OVERLAY</span>
0092     <span class="keyword">for</span> n = 1:B.number_of_lines <span class="comment">% Glenn 20160513: For cookbook examples I had to add 1 here. Not sure why. Doesn't work in other cases</span>
0093       B.line_offset(n) = (B.number_of_lines-n+0.5)/B.number_of_lines; <span class="comment">% Trace offset from bottom</span>
0094       B.line_waveform_continuous(n) = B.line_waveform_continuous(n) * B.scale + B.line_offset(n);
0095       <a href="plot.html" class="code" title="function varargout = plot(h)">plot</a>(B.line_waveform_continuous(n), <span class="string">'color'</span>, h.trace_color, <span class="string">'xunit'</span>, <span class="string">'minutes'</span>);
0096       hold on;
0097       <span class="keyword">if</span> ~<a href="../../../GISMO/core/@threecomp/isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>(B.line_waveform_events)
0098           B.line_waveform_events(n) = B.line_waveform_events(n) * B.scale + B.line_offset(n);
0099           <a href="plot.html" class="code" title="function varargout = plot(h)">plot</a>(B.line_waveform_events(n), <span class="string">'color'</span>, h.event_color, <span class="string">'xunit'</span>, <span class="string">'minutes'</span>);
0100       <span class="keyword">end</span>
0101     <span class="keyword">end</span> <span class="comment">% Finished plotting all drumplot trace data</span>
0102 
0103     <span class="comment">%% ADD FINISHING TOUCHES TO DRUMPLOT FIGURE</span>
0104     <a href="#_sub1" class="code" title="subfunction add_title(h,B)">add_title</a>(h,B);
0105     <a href="#_sub2" class="code" title="subfunction add_y_ticks(h,B)">add_y_ticks</a>(h,B);
0106     <a href="set.html" class="code" title="function h = set(h,varargin)">set</a>(B.ax,<span class="string">'XGrid'</span>,<span class="string">'on'</span>)
0107     xlim([0 h.mpl])
0108     <a href="set.html" class="code" title="function h = set(h,varargin)">set</a>(B.ax, <span class="string">'YLim'</span>, [0 1]);
0109 
0110     <span class="comment">%% OUTPUT</span>
0111     <span class="keyword">if</span> nargout == 0
0112     <span class="keyword">elseif</span> nargout == 1
0113        varargout(1) = {B.fh};
0114     <span class="keyword">else</span>
0115        warning(<span class="string">'DRUMPLOT/PLOT Too many outputs'</span>)
0116     <span class="keyword">end</span>
0117 <span class="keyword">end</span>
0118 
0119 <span class="comment">%% ADD TITLE TO DRUMPLOT FIGURE</span>
0120 <a name="_sub1" href="#_subfunctions" class="code">function add_title(h,B)</a>
0121     <span class="keyword">if</span> <a href="../../../GISMO/core/@threecomp/isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>(h.wave)
0122         title(B.ax,<span class="string">'No Data Selected'</span>,<span class="string">'FontSize'</span>,12);
0123     <span class="keyword">else</span>
0124         scn_str = [];
0125         sta = <a href="get.html" class="code" title="function val = get(h,prop_name)">get</a>(h.wave,<span class="string">'station'</span>);
0126         cha = <a href="get.html" class="code" title="function val = get(h,prop_name)">get</a>(h.wave,<span class="string">'channel'</span>);
0127         net = <a href="get.html" class="code" title="function val = get(h,prop_name)">get</a>(h.wave,<span class="string">'network'</span>);
0128         scn_str = [net,<span class="string">'.'</span>,sta,<span class="string">'.'</span>,cha];
0129         h_title = sprintf(<span class="string">'%s:\n%s to %s'</span>,scn_str, datestr(B.starttimes(1),31), datestr(B.endtimes(end),31) );
0130         title(B.ax,h_title);
0131     <span class="keyword">end</span>
0132 <span class="keyword">end</span>
0133 
0134 <span class="comment">%% ADD Y-AXES TICKS AND LABELS</span>
0135 <a name="_sub2" href="#_subfunctions" class="code">function add_y_ticks(h,B)</a>
0136 
0137     <span class="keyword">if</span> ~<a href="../../../GISMO/core/@threecomp/isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>(h.wave)
0138         ylabel(B.ax,<span class="string">''</span>)
0139         tick_positions = B.line_offset;
0140         tick_labels = datestr(B.starttimes,15);
0141         <a href="set.html" class="code" title="function h = set(h,varargin)">set</a>(B.ax,<span class="string">'YTick'</span>,fliplr(tick_positions))
0142         <a href="set.html" class="code" title="function h = set(h,varargin)">set</a>(B.ax,<span class="string">'YTickLabel'</span>,flipud(tick_labels))
0143     <span class="keyword">end</span>
0144 <span class="keyword">end</span>
0145</pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>