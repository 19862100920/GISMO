<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of cookbook</title>
  <meta name="keywords" content="cookbook">
  <meta name="description" content="This cookbook contains sample code to illustrate the basic functions of">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">GISMO</a> &gt; <a href="#">core</a> &gt; <a href="index.html">@threecomp</a> &gt; cookbook.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/core/@threecomp&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>cookbook
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This cookbook contains sample code to illustrate the basic functions of</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function cookbook(TC) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> This cookbook contains sample code to illustrate the basic functions of
 the threecomp toolbox.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/contributed/master_correlation/+mastercorr/extract.html" class="code" title="function varargout = extract(W,varargin)">extract</a>	EXTRACT extract matches to the master waveform</li><li><a href="../../../GISMO/core/@Catalog/disp.html" class="code" title="function disp(obj, showall)">disp</a>	CATALOG.DISP Display Catalog object</li><li><a href="../../../GISMO/core/@Catalog/plot.html" class="code" title="function plot(catalogObject, varargin)">plot</a>	CATALOG.PLOT Plot hypocenters in map view and cross-sections</li><li><a href="../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/@correlation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../GISMO/core/@datasource/disp.html" class="code" title="function disp(ds)">disp</a>	DISP Datasource disp overloaded operator</li><li><a href="../../../GISMO/core/@datasource/get.html" class="code" title="function val = get(ds, propertyname)">get</a>	</li><li><a href="../../../GISMO/core/@drumplot/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get drumplot properties</li><li><a href="../../../GISMO/core/@drumplot/plot.html" class="code" title="function varargout = plot(h)">plot</a>	PLOT: Drumplot plotting function. A drumplot object (h) contains no</li><li><a href="../../../GISMO/core/@filterobject/disp.html" class="code" title="function disp(f)">disp</a>	DISP - Filterobject disp overloaded operator</li><li><a href="../../../GISMO/core/@filterobject/get.html" class="code" title="function val = get(f, prop_name)">get</a>	GET - Get filterobject properties</li><li><a href="../../../GISMO/core/@rsam/extract.html" class="code" title="function s=extract(self, snum, enum)">extract</a>	</li><li><a href="../../../GISMO/core/@rsam/plot.html" class="code" title="function handlePlot = plot(rsam_vector, varargin)">plot</a>	RSAM/PLOT plot rsam data</li><li><a href="../../../GISMO/core/@scnlobject/disp.html" class="code" title="function disp(sncl)">disp</a>	DISP - scnl disp overloaded operator</li><li><a href="../../../GISMO/core/@scnlobject/get.html" class="code" title="function stuff = get(scnl, prop_name)">get</a>	GET for the scnl object</li><li><a href="../../../GISMO/core/@spectralobject/disp.html" class="code" title="function disp(s)">disp</a>	DISP - spectralobject disp overloaded operator</li><li><a href="../../../GISMO/core/@spectralobject/get.html" class="code" title="function out = get(s, prop_name)">get</a>	GET - Get properties for spectralobject</li><li><a href="demo.html" class="code" title="function [w,backAzimuth,trigger,staLat,staLon,origLat,origLon] = demo(TC)">demo</a>	DEMO</li><li><a href="disp.html" class="code" title="function disp(TC)">disp</a>	DISP Display threecomp object</li><li><a href="extract.html" class="code" title="function pm = extract(TC,varargin)">extract</a>	EXTRACT particle motion parameters from a threecomp object</li><li><a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>	GET    Get threecomp object properties.</li><li><a href="particlemotion.html" class="code" title="function TC = particlemotion(TC, varargin)">particlemotion</a>	PARTICLEMOTION calculates particle motion vectors for threecomp object</li><li><a href="plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>	PLOT plots a threecomp object</li><li><a href="plotpm.html" class="code" title="function plotpm(TC);">plotpm</a>	PLOTPM Plot particle motion coefficients.</li><li><a href="rotate.html" class="code" title="function TC = rotate(TC,varargin)">rotate</a>	Rotate component orientations</li><li><a href="spin.html" class="code" title="function [TC,c2, c3] = spin(TCin,varargin)">spin</a>	SPIN rotate and plot horizontal components</li><li><a href="threecomp.html" class="code" title="">threecomp</a>	THREECOMP Object for three component waveform data</li><li><a href="../../../GISMO/core/@waveform/disp.html" class="code" title="function disp(w)">disp</a>	DISP Waveform disp overloaded operator</li><li><a href="../../../GISMO/core/@waveform/extract.html" class="code" title="function outW = extract(w, method, startV, endV)">extract</a>	EXTRACT creates a waveform with a subset of another's data.</li><li><a href="../../../GISMO/core/@waveform/get.html" class="code" title="function val = get(w,prop_name)">get</a>	GET Get waveform properties</li><li><a href="../../../GISMO/core/@waveform/plot.html" class="code" title="function varargout = plot(w, varargin)">plot</a>	PLOT plots a waveform object</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/disp.html" class="code" title="function disp(c)">disp</a>	CORRELATION/DISPLAY Command window display of a correlation object</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/plot.html" class="code" title="function plot(c,varargin)">plot</a>	PLOT(C) plots waveforms stored in a correlation object. Traces are</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/disp.html" class="code" title="function disp(T)">disp</a>	disp   Display information about SeismicTrace(s)</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/plot.html" class="code" title="function varargout = plot(T, varargin)">plot</a>	plot   plots a SeismicTrace</li><li><a href="../../../GISMO/deprecated/@helicorder/disp.html" class="code" title="function disp(h)">disp</a>	DISP: Helicorder disp overloaded operator</li><li><a href="../../../GISMO/deprecated/@helicorder/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get helicorder properties</li><li><a href="../../../GISMO/deprecated/fft_tools/+wf_fft/plot.html" class="code" title="function plot(w)">plot</a>	PLOT plot fourier transform of a waveform</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/core/@Catalog/Catalog.html" class="code" title="">Catalog</a>	CATALOG the blueprint for Catalog objects in GISMO</li><li><a href="../../../GISMO/core/@EventRate/EventRate.html" class="code" title="">EventRate</a>	</li><li><a href="../../../GISMO/core/@correlation/correlation.html" class="code" title="function c = correlation(varargin)">correlation</a>	</li><li><a href="../../../GISMO/core/@drumplot/drumplot.html" class="code" title="">drumplot</a>	DRUMPLOT the blueprint for drumplot objects in GISMO</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/NewCorrelation.html" class="code" title="">NewCorrelation</a>	</li><li><a href="../../../GISMO/core/dev/@TraceFilter/TraceFilter.html" class="code" title="">TraceFilter</a>	</li><li><a href="../../../GISMO/core/dev/@TraceSpectra/TraceSpectra.html" class="code" title="">TraceSpectra</a>	</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function cookbook(TC)</a>
0002 
0003 <span class="comment">% This cookbook contains sample code to illustrate the basic functions of</span>
0004 <span class="comment">% the threecomp toolbox.</span>
0005 
0006 
0007 <span class="comment">%% Load demo data</span>
0008 <span class="comment">% Demo dataset consists of 14 stations of data from a single earthquake</span>
0009 <span class="comment">% recorded regionally in California. Each station has three components of</span>
0010 <span class="comment">% waveform data. There is an accompanying 14 element vector &quot;backAzimuth&quot;</span>
0011 <span class="comment">% which contains the backazimuth from each station to the origin. The</span>
0012 <span class="comment">% vector &quot;trigger&quot; contains a set a crude surface wave pick times - one per</span>
0013 <span class="comment">% station. The trigger field is not required by the threecomp object.</span>
0014 <span class="comment">% However it provides functionality demonstrated later. Though not required</span>
0015 <span class="comment">% for threecomp functions, each trace also contains the station lat/lon and</span>
0016 <span class="comment">% the origin lat/lon used to illustrate three component processing. DEMO</span>
0017 <span class="comment">% also creates a simple map, useful for interpreting the 3-component data.</span>
0018 
0019 [w,backAzimuth,trigger] = <a href="demo.html" class="code" title="function [w,backAzimuth,trigger,staLat,staLon,origLat,origLon] = demo(TC)">demo</a>(<a href="threecomp.html" class="code" title="">threecomp</a>);
0020 
0021 <span class="comment">%% Create a threecomp object</span>
0022 <span class="comment">% In this example, the backAzimuth property is set as well.</span>
0023 
0024 TC = <a href="threecomp.html" class="code" title="">threecomp</a>(w,backAzimuth,trigger);
0025 
0026 
0027 <span class="comment">%% List object properties</span>
0028 <span class="comment">% Example lists all network-station-channels-location and the full set of</span>
0029 <span class="comment">% properties for threecomp element 5.</span>
0030 
0031 NSCL = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC,<span class="string">'NSCL'</span>)
0032 <a href="disp.html" class="code" title="function disp(TC)">disp</a>(TC(4));
0033 
0034 
0035 <span class="comment">%% Plot object</span>
0036 <span class="comment">% PLOT operates on a single object at a time.</span>
0037 
0038 figure;
0039 <a href="plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>(TC(4));
0040 
0041 
0042 <span class="comment">%% Rotate horizontal traces</span>
0043 <span class="comment">% Default useage rotates traces inline with the backazimuths. Plot rotated</span>
0044 <span class="comment">% traces. Note the horizontal and vertical orientations noted on the</span>
0045 <span class="comment">% plot. See DESCRIBE(THREECOMP) for reference frame specifics.</span>
0046 
0047 TC = <a href="rotate.html" class="code" title="function TC = rotate(TC,varargin)">rotate</a>(TC);
0048 figure;
0049 <a href="plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>(TC(4))
0050 
0051 
0052 <span class="comment">%% Examinte traces over a range of rotations</span>
0053 <span class="comment">% This function rotates a single threecomp object through a range of</span>
0054 <span class="comment">% bearings and plots the suite of rotated traces.</span>
0055 
0056 baz = round(TC(13).backAzimuth)
0057 <a href="spin.html" class="code" title="function [TC,c2, c3] = spin(TCin,varargin)">spin</a>(TC(13),[baz-180:10:baz+180])
0058 
0059 
0060 <span class="comment">%% Calculate particle motion coefficients</span>
0061 <span class="comment">% The PARTCLEMOTION function fills the following threecomp properties:</span>
0062 <span class="comment">% rectilinearity, planarity, energy, azimuth and inclination. See</span>
0063 <span class="comment">% DESCRIBE(THREECOMP) for description of each. Display properties and plot</span>
0064 <span class="comment">% traces.</span>
0065 
0066 TC = <a href="particlemotion.html" class="code" title="function TC = particlemotion(TC, varargin)">particlemotion</a>(TC,2,20);
0067 <a href="disp.html" class="code" title="function disp(TC)">disp</a>(TC(4));
0068 <a href="plotpm.html" class="code" title="function plotpm(TC);">plotpm</a>(TC(4))
0069 
0070 
0071 
0072 <span class="comment">%% Extract mean particle motion</span>
0073 <span class="comment">% This function extracts a single value of each particle motion coefficient</span>
0074 <span class="comment">% averaged over a 30 sec window beginning at the trigger time. Include only</span>
0075 <span class="comment">% those time steps that meet the minimum rectilinearity threshold of 0.7.</span>
0076 
0077 pm = <a href="extract.html" class="code" title="function pm = extract(TC,varargin)">extract</a>(TC,[0 30],[0.7 0]);
0078 
0079 
0080 <span class="comment">%% Add azimuth of particle motions to station map</span>
0081 <span class="comment">% Plot the extracted particle motion azimuths on the station map. First,</span>
0082 <span class="comment">% replot the demo map. Second, create vector lines from the azimuth</span>
0083 <span class="comment">% particle motion coefficients. Third, plot the lines.</span>
0084 
0085 [~,~,~,staLat,staLon,origLat,origLon] = <a href="demo.html" class="code" title="function [w,backAzimuth,trigger,staLat,staLon,origLat,origLon] = demo(TC)">demo</a>(<a href="threecomp.html" class="code" title="">threecomp</a>);
0086 <span class="keyword">for</span> n=1:size(w,1)
0087     [arrowLat(1,n) arrowLon(1,n)] = reckon(staLat(n),staLon(n), -0.3, pm(n).azimuth);
0088     [arrowLat(2,n) arrowLon(2,n)] = reckon(staLat(n),staLon(n), 0.3, pm(n).azimuth);
0089 <span class="keyword">end</span>
0090 <a href="plot.html" class="code" title="function varargout = plot(TC, varargin)">plot</a>(arrowLon,arrowLat,<span class="string">'r-'</span>);
0091 
0092</pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>