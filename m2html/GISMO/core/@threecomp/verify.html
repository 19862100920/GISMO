<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of verify</title>
  <meta name="keywords" content="verify">
  <meta name="description" content="VERIFY Check for property conflicts in the threecomp object.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">GISMO</a> &gt; <a href="#">core</a> &gt; <a href="index.html">@threecomp</a> &gt; verify.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for GISMO/core/@threecomp&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>verify
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>VERIFY Check for property conflicts in the threecomp object.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [conflicts] = verify(TC) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">VERIFY Check for property conflicts in the threecomp object.
 [CONFLICTS] = VERIFY(TC) Check property conflicts of a threecomp object. Runs a
 series of tests to ensure that the threecomp object meets minimum
 standards and is suitable for further processing.  

 The output term CONFLICTS is a list of booleans showing the result of
 various consistency tests. A conflict string of '00000' shows that no 
 conflicts were found. The presence of 1's denote failed tests. Specifically:
   position 1:  start times don't match
   position 2:  end times don't match
   position 3:  sample rates don't match
   position 4:  units don't match
   position 5:  station names don't match
   position 6:  insufficient data length. Minimum 25 samples required.
   position 7:  component tuple not recognized (ZNE, ZRT, Z21)

 This function is mostly likely to be called from within other
 threecomp functions.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/core/@Catalog/disp.html" class="code" title="function disp(obj, showall)">disp</a>	CATALOG.DISP Display Catalog object</li><li><a href="../../../GISMO/core/@correlation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/@datasource/disp.html" class="code" title="function disp(ds)">disp</a>	DISP Datasource disp overloaded operator</li><li><a href="../../../GISMO/core/@datasource/get.html" class="code" title="function val = get(ds, propertyname)">get</a>	</li><li><a href="../../../GISMO/core/@drumplot/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get drumplot properties</li><li><a href="../../../GISMO/core/@filterobject/disp.html" class="code" title="function disp(f)">disp</a>	DISP - Filterobject disp overloaded operator</li><li><a href="../../../GISMO/core/@filterobject/get.html" class="code" title="function val = get(f, prop_name)">get</a>	GET - Get filterobject properties</li><li><a href="../../../GISMO/core/@scnlobject/disp.html" class="code" title="function disp(sncl)">disp</a>	DISP - scnl disp overloaded operator</li><li><a href="../../../GISMO/core/@scnlobject/get.html" class="code" title="function stuff = get(scnl, prop_name)">get</a>	GET for the scnl object</li><li><a href="../../../GISMO/core/@spectralobject/disp.html" class="code" title="function disp(s)">disp</a>	DISP - spectralobject disp overloaded operator</li><li><a href="../../../GISMO/core/@spectralobject/get.html" class="code" title="function out = get(s, prop_name)">get</a>	GET - Get properties for spectralobject</li><li><a href="disp.html" class="code" title="function disp(TC)">disp</a>	DISP Display threecomp object</li><li><a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>	GET    Get threecomp object properties.</li><li><a href="isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>	ISEMPTY Display threecomp object</li><li><a href="../../../GISMO/core/@waveform/disp.html" class="code" title="function disp(w)">disp</a>	DISP Waveform disp overloaded operator</li><li><a href="../../../GISMO/core/@waveform/get.html" class="code" title="function val = get(w,prop_name)">get</a>	GET Get waveform properties</li><li><a href="../../../GISMO/core/@waveform/isempty.html" class="code" title="function TF = isempty(w)">isempty</a>	ISEMPTY returns TRUE if waveform contains no data</li><li><a href="../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>	MIN    Smallest value of a waveform.</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/disp.html" class="code" title="function disp(c)">disp</a>	CORRELATION/DISPLAY Command window display of a correlation object</li><li><a href="../../../GISMO/core/dev/@NewCorrelation/get.html" class="code" title="function val = get(c,prop_name)">get</a>	GET - Get correlation properties</li><li><a href="../../../GISMO/core/dev/@SeismicTrace/disp.html" class="code" title="function disp(T)">disp</a>	disp   Display information about SeismicTrace(s)</li><li><a href="../../../GISMO/deprecated/@helicorder/disp.html" class="code" title="function disp(h)">disp</a>	DISP: Helicorder disp overloaded operator</li><li><a href="../../../GISMO/deprecated/@helicorder/get.html" class="code" title="function val = get(h,prop_name)">get</a>	GET: Get helicorder properties</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GISMO/core/@correlation/align.html" class="code" title="function c = align(c,varargin)">align</a>	c = ALIGN(c)</li><li><a href="../../../GISMO/core/@correlation/conv.html" class="code" title="function c = conv(c,varargin)">conv</a>	c = CONV(c) convolves all traces with the final trace. By default the new</li><li><a href="../../../GISMO/core/@correlation/correlation.html" class="code" title="function c = correlation(varargin)">correlation</a>	</li><li><a href="../../../GISMO/core/@correlation/deconv.html" class="code" title="function c = deconv(c,varargin)">deconv</a>	c = DECONV(c) convolves all traces with the final trace. By default the new</li><li><a href="../../../GISMO/core/@correlation/stack.html" class="code" title="function c = stack(c,varargin)">stack</a>	c = STACK(c)</li><li><a href="threecomp.html" class="code" title="">threecomp</a>	THREECOMP Object for three component waveform data</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function conflict = do_one(TC,num)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [conflicts] = verify(TC)</a>
0002 
0003 <span class="comment">%VERIFY Check for property conflicts in the threecomp object.</span>
0004 <span class="comment">% [CONFLICTS] = VERIFY(TC) Check property conflicts of a threecomp object. Runs a</span>
0005 <span class="comment">% series of tests to ensure that the threecomp object meets minimum</span>
0006 <span class="comment">% standards and is suitable for further processing.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% The output term CONFLICTS is a list of booleans showing the result of</span>
0009 <span class="comment">% various consistency tests. A conflict string of '00000' shows that no</span>
0010 <span class="comment">% conflicts were found. The presence of 1's denote failed tests. Specifically:</span>
0011 <span class="comment">%   position 1:  start times don't match</span>
0012 <span class="comment">%   position 2:  end times don't match</span>
0013 <span class="comment">%   position 3:  sample rates don't match</span>
0014 <span class="comment">%   position 4:  units don't match</span>
0015 <span class="comment">%   position 5:  station names don't match</span>
0016 <span class="comment">%   position 6:  insufficient data length. Minimum 25 samples required.</span>
0017 <span class="comment">%   position 7:  component tuple not recognized (ZNE, ZRT, Z21)</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% This function is mostly likely to be called from within other</span>
0020 <span class="comment">% threecomp functions.</span>
0021 
0022 <span class="comment">% Author: Michael West, Geophysical Institute, Univ. of Alaska Fairbanks</span>
0023 <span class="comment">% $Date$</span>
0024 <span class="comment">% $Revision$</span>
0025 
0026 
0027 
0028 <span class="keyword">for</span> n = 1:length(TC)
0029     conflicts{n} = <a href="#_sub1" class="code" title="subfunction conflict = do_one(TC,num)">do_one</a>(TC(n),num2str(n));
0030 <span class="keyword">end</span>
0031 conflicts = reshape(conflicts,size(TC));
0032 
0033 
0034 
0035 
0036 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0037 <span class="comment">% Process a single threecomp trace tuple</span>
0038 <a name="_sub1" href="#_subfunctions" class="code">function conflict = do_one(TC,num)</a>
0039 
0040 conflict = <span class="string">'0000000'</span>;
0041 
0042 <span class="keyword">if</span> any(<a href="isempty.html" class="code" title="function TF = isempty(TC)">isempty</a>(TC.traces))
0043     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': one or more empty waveforms'</span>]);
0044     conflict(6) = <span class="string">'1'</span>;
0045     <span class="keyword">return</span>
0046 <span class="keyword">end</span>
0047 
0048 
0049 <span class="comment">% CHECK START TIMES</span>
0050 t = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'START_MATLAB'</span>);
0051 <span class="keyword">if</span> ( t(2)~=t(1) ) || ( t(3)~=t(1) )
0052     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': traces have different start times'</span>]);
0053     conflict(1) = <span class="string">'1'</span>;
0054 <span class="keyword">end</span>;
0055 
0056 
0057 <span class="comment">% CHECK END TIMES</span>
0058 t = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'END_MATLAB'</span>);
0059 <span class="keyword">if</span> ( t(2)~=t(1) ) || ( t(3)~=t(1) )
0060     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': traces have different end times'</span>]);
0061     conflict(2) = <span class="string">'1'</span>;
0062 <span class="keyword">end</span>;
0063 
0064 
0065 <span class="comment">% CHECK FREQUENCIES</span>
0066 freq = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'FREQ'</span>);
0067 <span class="keyword">if</span> ( freq(2)~=freq(1) ) || ( freq(3)~=freq(1) )
0068     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': traces have different frequencies'</span>]);
0069     conflict(3) = <span class="string">'1'</span>;
0070 <span class="keyword">end</span>;
0071 
0072 
0073 <span class="comment">% CHECK FOR COMMON UNITS</span>
0074 units = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'UNITS'</span>);
0075 tf = strcmpi(units,units(1));
0076 <span class="keyword">if</span> ~all(tf)
0077     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': traces have different units'</span>]);
0078     conflict(4) = <span class="string">'1'</span>;
0079 <span class="keyword">end</span>
0080 
0081 
0082 <span class="comment">% CHECK FOR COMMON STATION, NETWORK, LOCATION NAMES</span>
0083 sta = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'STATION'</span>);
0084 tf = strcmpi(sta,sta(1));
0085 <span class="keyword">if</span> ~all(tf)
0086     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': traces have different station codes.'</span>]);
0087     conflict(5) = <span class="string">'1'</span>;
0088 <span class="keyword">end</span>
0089 
0090 
0091 <span class="comment">% CHECK FOR SUFFICIENT DATA LENGTH</span>
0092 dataLength = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'DATA_LENGTH'</span>);
0093 <span class="keyword">if</span> <a href="../../../GISMO/core/@waveform/min.html" class="code" title="function [Y, I] = min(w)">min</a>(dataLength)&lt;25
0094     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': traces are too short. Not enough samples.'</span>]);
0095     conflict(6) = <span class="string">'1'</span>;
0096 <span class="keyword">end</span>
0097 
0098 
0099 
0100 <span class="comment">% CHECK ARRANGEMENT OF CHANNELS IN WAVEFORM OBJECT</span>
0101 channels = <a href="get.html" class="code" title="function val = get(TC,varargin)">get</a>(TC.traces,<span class="string">'CHANNEL'</span>);
0102 <span class="keyword">if</span> any([ length(channels{1})&lt;3 length(channels{2})&lt;3 length(channels{3})&lt;3 ])
0103     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': channel codes have less than three characters'</span>]);
0104     conflict(7) = <span class="string">'1'</span>;
0105 <span class="keyword">elseif</span> ~strcmpi(channels{1}(3),<span class="string">'Z'</span>)
0106     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': First channel character is not Z component'</span>]);
0107     conflict(7) = <span class="string">'1'</span>;
0108 <span class="keyword">elseif</span> ~strcmpi(channels{2}(3),<span class="string">'N'</span>) &amp;&amp; ~strcmpi(channels{1,2}(end),<span class="string">'R'</span>) &amp;&amp; ~strcmpi(channels{1,2}(end),<span class="string">'1'</span>)
0109     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': channel character is not N, R, or 2 component'</span>]);
0110     conflict(7) = <span class="string">'1'</span>;
0111 <span class="keyword">elseif</span> ~strcmpi(channels{3}(3),<span class="string">'E'</span>) &amp;&amp; ~strcmpi(channels{1,3}(end),<span class="string">'T'</span>) &amp;&amp; ~strcmpi(channels{1,3}(end),<span class="string">'2'</span>)
0112     <a href="disp.html" class="code" title="function disp(TC)">disp</a>([<span class="string">'problem in element '</span> num <span class="string">': Third channel character is not E, T, or 1 component'</span>]);
0113     conflict(7) = <span class="string">'1'</span>;
0114 <span class="keyword">end</span>
0115</pre></div>
<hr><address>Generated on Wed 12-Oct-2016 17:36:30 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>