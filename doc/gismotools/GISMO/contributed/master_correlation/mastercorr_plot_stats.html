<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of mastercorr_plot_stats</title>
  <meta name="keywords" content="mastercorr_plot_stats">
  <meta name="description" content="MASTERCORR_PLOT_STATS plot statistics from master correlation algorithm">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="#">gismotools</a> &gt; <a href="../../index.html">GISMO</a> &gt; <a href="#">contributed</a> &gt; <a href="index.html">master_correlation</a> &gt; mastercorr_plot_stats.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for gismotools/GISMO/contributed/master_correlation&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>mastercorr_plot_stats
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>MASTERCORR_PLOT_STATS plot statistics from master correlation algorithm</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function mastercorr_plot_stats(W) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">MASTERCORR_PLOT_STATS plot statistics from master correlation algorithm
 W = MASTERCORR_PLOT_STATS(W) plots summary statistics following an
 application of MASTERCORR_SCAN. This summary is useful for assessing the
 quality and the nature of the detected events. The input waveform W may
 be any dimension. However it must contain the fields produced by
 MASTERCORR_SCAN including: MASTERCORR_TRIG, MASTERCORR_CORR,
 MASTERCORR_ADJACENT_CORR 

 *** NOTE ABOUT MULTIPLE WAVEFORMS ***
 This function is designed to accept NxM waveform matrices as input. In
 this case the plot will contain relevent data from all element waveforms
 of W. This is useful, for example, when W is a 24x1
 matrix of hourly waveforms. However, unexpected (or clever!) results may
 be produced when W is complicated by elements with different channels or
 master waveform snippets. For some uses it may prove wise to pass only
 selected elements of W to this function. For example:
 C = MASTERCORR_EXTRACT(W(1:5)) 
 
 See also <a href="mastercorr_scan.html" class="code" title="function [WW,WWxc] = mastercorr_scan(WW,WWsnippet,threshold)">mastercorr_scan</a>, <a href="mastercorr_extract.html" class="code" title="function varargout = mastercorr_extract(W,varargin)">mastercorr_extract</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="mastercorr_cookbook.html" class="code" title="">mastercorr_cookbook</a>	Demonstration of the major features of the master waveform correlation</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function mastercorr_plot_stats(W)</a>
0002 
0003 <span class="comment">%MASTERCORR_PLOT_STATS plot statistics from master correlation algorithm</span>
0004 <span class="comment">% W = MASTERCORR_PLOT_STATS(W) plots summary statistics following an</span>
0005 <span class="comment">% application of MASTERCORR_SCAN. This summary is useful for assessing the</span>
0006 <span class="comment">% quality and the nature of the detected events. The input waveform W may</span>
0007 <span class="comment">% be any dimension. However it must contain the fields produced by</span>
0008 <span class="comment">% MASTERCORR_SCAN including: MASTERCORR_TRIG, MASTERCORR_CORR,</span>
0009 <span class="comment">% MASTERCORR_ADJACENT_CORR</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% *** NOTE ABOUT MULTIPLE WAVEFORMS ***</span>
0012 <span class="comment">% This function is designed to accept NxM waveform matrices as input. In</span>
0013 <span class="comment">% this case the plot will contain relevent data from all element waveforms</span>
0014 <span class="comment">% of W. This is useful, for example, when W is a 24x1</span>
0015 <span class="comment">% matrix of hourly waveforms. However, unexpected (or clever!) results may</span>
0016 <span class="comment">% be produced when W is complicated by elements with different channels or</span>
0017 <span class="comment">% master waveform snippets. For some uses it may prove wise to pass only</span>
0018 <span class="comment">% selected elements of W to this function. For example:</span>
0019 <span class="comment">% C = MASTERCORR_EXTRACT(W(1:5))</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% See also mastercorr_scan, mastercorr_extract</span>
0022 
0023 <span class="comment">% Author: Michael West, Geophysical Institute, Univ. of Alaska Fairbanks</span>
0024 <span class="comment">% $Date$</span>
0025 <span class="comment">% $Revision$</span>
0026 
0027 
0028 <span class="comment">% CHECK INPUTS</span>
0029 <span class="keyword">if</span> nargin ~= 1
0030     error(<span class="string">'Incorrect number of inputs'</span>);
0031 <span class="keyword">end</span>
0032 <span class="keyword">if</span> ~isa(W,<span class="string">'waveform'</span>) 
0033     error(<span class="string">'First argument must be waveform objects'</span>);
0034 <span class="keyword">end</span>
0035 
0036 
0037 <span class="comment">% READ MASTERCORR FIELDS</span>
0038 trig = [];
0039 corr = [];
0040 corrAdj = [];
0041 <span class="keyword">if</span> numel(W)&gt;1
0042     <span class="keyword">for</span> n=1:numel(W)
0043         trig = [trig ; get(W(n),<span class="string">'MASTERCORR_TRIG'</span>)];
0044         corr = [corr ; get(W(n),<span class="string">'MASTERCORR_CORR'</span>)];
0045         corrAdj = [corrAdj ; get(W(n),<span class="string">'MASTERCORR_ADJACENT_CORR'</span>)];
0046         
0047     <span class="keyword">end</span>
0048 <span class="keyword">else</span>
0049     trig = get(W,<span class="string">'MASTERCORR_TRIG'</span>);
0050     corr = get(W,<span class="string">'MASTERCORR_CORR'</span>);
0051     corrAdj = get(W,<span class="string">'MASTERCORR_ADJACENT_CORR'</span>);
0052 <span class="keyword">end</span>
0053 
0054 
0055 <span class="keyword">if</span> numel(trig)==0
0056    disp(<span class="string">'No MASTERCORR_TRIG field in this data'</span>);
0057    <span class="keyword">return</span>;
0058 <span class="keyword">end</span>
0059 
0060 
0061 
0062 <span class="comment">% SORT BY TIME</span>
0063 [tmp,index] = sort(trig);
0064 trig = trig(index);
0065 corr = corr(index);
0066 corrAdj = corrAdj(index);
0067 
0068 
0069 
0070 
0071 <span class="comment">% MAKE PLOT</span>
0072 figure(<span class="string">'Color'</span>,<span class="string">'w'</span>,<span class="string">'Position'</span>,[50 50 850 1100]);
0073 box on; hold on;
0074 set(gcf,<span class="string">'DefaultLineLineWidth'</span>,1);
0075 set(gcf,<span class="string">'DefaultAxesFontSize'</span>,12);
0076 set(gcf,<span class="string">'DefaultLineMarkerSize'</span>,5);
0077 
0078 
0079 <span class="comment">% TIME HISTORY</span>
0080 subplot(3,1,1);
0081 plot([trig' ; trig'],[corr' ; corrAdj'],<span class="string">'-'</span>,<span class="string">'Color'</span>,[0.7 0.7 0.7])
0082 hold on;
0083 plot(trig,corr,<span class="string">'ok'</span>,<span class="string">'MarkerFaceColor'</span>,<span class="string">'y'</span>)
0084 xlim([min(trig) max(trig)]);
0085 ylim([0.5 1.0]);
0086 datetick(<span class="string">'x'</span>,<span class="string">'KeepLimits'</span>);
0087 set(gca,<span class="string">'YGrid'</span>,<span class="string">'on'</span>)
0088 set(gca,<span class="string">'YTick'</span>,[0:.1:1]);
0089 ylabel(<span class="string">'Correlation coefficient'</span>)
0090 legend(<span class="string">'adjacent peak'</span>,<span class="string">'location'</span>,<span class="string">'SouthWest'</span>);
0091 
0092 subplot(3,1,2);
0093 plot(trig(2:end),86400*(trig(2:end)-trig(1:end-1)),<span class="string">'ko'</span>,<span class="string">'MarkerFaceColor'</span>,<span class="string">'y'</span>)
0094 set(gca,<span class="string">'YScale'</span>,<span class="string">'log'</span>);
0095 xlim([min(trig) max(trig)]);
0096 datetick(<span class="string">'x'</span>,<span class="string">'KeepLimits'</span>);
0097 set(gca,<span class="string">'YGrid'</span>,<span class="string">'on'</span>)
0098 <span class="comment">%set(gca,'YTick',10.^[1:10]);</span>
0099 ylabel(<span class="string">'Time (s)'</span>)
0100 legend(<span class="string">'Event spacing'</span>,<span class="string">'location'</span>,<span class="string">'SouthWest'</span>);
0101 
0102 subplot(3,1,3)
0103 hist(corr,[0.5:0.01:1]);
0104 xlim([0.5 1]);
0105 h = findobj(gca,<span class="string">'Type'</span>,<span class="string">'patch'</span>);
0106 set(h,<span class="string">'FaceColor'</span>,<span class="string">'y'</span>,<span class="string">'EdgeColor'</span>,<span class="string">'k'</span>)
0107 legend(<span class="string">'Correlation'</span>,<span class="string">'location'</span>,<span class="string">'SouthWest'</span>);
0108 
0109 
0110 <span class="comment">% PLOT INTEREVENT TIME AGAINST CORRELATION VALUE</span>
0111 <span class="comment">%figure</span>
0112 <span class="comment">%tDiff = 86400*(trig(2:end)-trig(1:end-1));</span>
0113 <span class="comment">%plot([tDiff' ; tDiff'],[corr(2:end)' ; corr(1:end-1)'],'k-')</span>
0114 <span class="comment">%hold on;</span>
0115 <span class="comment">%plot(tDiff,max([corr(2:end)' ; corr(1:end-1)']),'ko');</span>
0116 <span class="comment">%set(gca,'XScale','log');</span>
0117 
0118 
0119 
0120 
0121 <span class="comment">%PRINT OUT FIGURE</span>
0122 set(gcf, <span class="string">'paperorientation'</span>, <span class="string">'portrait'</span>);
0123 set(gcf, <span class="string">'paperposition'</span>, [.25 .25 8 10.5] );
0124</pre></div>
<hr><address>Generated on Sun 11-Oct-2015 14:40:09 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>